{"version":3,"file":"router-sdk.esm.js","sources":["../src/constants.ts","../src/approveAndCall.ts","../src/multicallExtended.ts","../src/paymentsExtended.ts","../node_modules/regenerator-runtime/runtime.js","../src/entities/protocol.ts","../src/entities/route.ts","../src/entities/trade.ts","../src/swapRouter.ts"],"sourcesContent":["import JSBI from 'jsbi'\n\nexport const MSG_SENDER = '0x0000000000000000000000000000000000000001'\nexport const ADDRESS_THIS = '0x0000000000000000000000000000000000000002'\n\nexport const ZERO = JSBI.BigInt(0)\nexport const ONE = JSBI.BigInt(1)\n","import { Interface } from '@ethersproject/abi'\nimport invariant from 'tiny-invariant'\nimport { abi } from '@uniswap/swap-router-contracts/artifacts/contracts/interfaces/IApproveAndCall.sol/IApproveAndCall.json'\nimport { Currency, Percent, Token } from '@uniswap/sdk-core'\nimport {\n  MintSpecificOptions,\n  IncreaseSpecificOptions,\n  NonfungiblePositionManager,\n  Position,\n  toHex,\n} from '@uniswap/v3-sdk'\nimport JSBI from 'jsbi'\n\n// condensed version of v3-sdk AddLiquidityOptions containing only necessary swap + add attributes\nexport type CondensedAddLiquidityOptions = Omit<MintSpecificOptions, 'createPool'> | IncreaseSpecificOptions\n\nexport enum ApprovalTypes {\n  NOT_REQUIRED = 0,\n  MAX = 1,\n  MAX_MINUS_ONE = 2,\n  ZERO_THEN_MAX = 3,\n  ZERO_THEN_MAX_MINUS_ONE = 4,\n}\n\n// type guard\nexport function isMint(options: CondensedAddLiquidityOptions): options is Omit<MintSpecificOptions, 'createPool'> {\n  return Object.keys(options).some((k) => k === 'recipient')\n}\n\nexport abstract class ApproveAndCall {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static encodeApproveMax(token: Token): string {\n    return ApproveAndCall.INTERFACE.encodeFunctionData('approveMax', [token.address])\n  }\n\n  public static encodeApproveMaxMinusOne(token: Token): string {\n    return ApproveAndCall.INTERFACE.encodeFunctionData('approveMaxMinusOne', [token.address])\n  }\n\n  public static encodeApproveZeroThenMax(token: Token): string {\n    return ApproveAndCall.INTERFACE.encodeFunctionData('approveZeroThenMax', [token.address])\n  }\n\n  public static encodeApproveZeroThenMaxMinusOne(token: Token): string {\n    return ApproveAndCall.INTERFACE.encodeFunctionData('approveZeroThenMaxMinusOne', [token.address])\n  }\n\n  public static encodeCallPositionManager(calldatas: string[]): string {\n    invariant(calldatas.length > 0, 'NULL_CALLDATA')\n\n    if (calldatas.length == 1) {\n      return ApproveAndCall.INTERFACE.encodeFunctionData('callPositionManager', calldatas)\n    } else {\n      const encodedMulticall = NonfungiblePositionManager.INTERFACE.encodeFunctionData('multicall', [calldatas])\n      return ApproveAndCall.INTERFACE.encodeFunctionData('callPositionManager', [encodedMulticall])\n    }\n  }\n  /**\n   * Encode adding liquidity to a position in the nft manager contract\n   * @param position Forcasted position with expected amount out from swap\n   * @param minimalPosition Forcasted position with custom minimal token amounts\n   * @param addLiquidityOptions Options for adding liquidity\n   * @param slippageTolerance Defines maximum slippage\n   */\n  public static encodeAddLiquidity(\n    position: Position,\n    minimalPosition: Position,\n    addLiquidityOptions: CondensedAddLiquidityOptions,\n    slippageTolerance: Percent\n  ): string {\n    let { amount0: amount0Min, amount1: amount1Min } = position.mintAmountsWithSlippage(slippageTolerance)\n\n    // position.mintAmountsWithSlippage() can create amounts not dependenable in scenarios\n    // such as range orders. Allow the option to provide a position with custom minimum amounts\n    // for these scenarios\n    if (JSBI.lessThan(minimalPosition.amount0.quotient, amount0Min)) {\n      amount0Min = minimalPosition.amount0.quotient\n    }\n    if (JSBI.lessThan(minimalPosition.amount1.quotient, amount1Min)) {\n      amount1Min = minimalPosition.amount1.quotient\n    }\n\n    if (isMint(addLiquidityOptions)) {\n      return ApproveAndCall.INTERFACE.encodeFunctionData('mint', [\n        {\n          token0: position.pool.token0.address,\n          token1: position.pool.token1.address,\n          fee: position.pool.fee,\n          tickLower: position.tickLower,\n          tickUpper: position.tickUpper,\n          amount0Min: toHex(amount0Min),\n          amount1Min: toHex(amount1Min),\n          recipient: addLiquidityOptions.recipient,\n        },\n      ])\n    } else {\n      return ApproveAndCall.INTERFACE.encodeFunctionData('increaseLiquidity', [\n        {\n          token0: position.pool.token0.address,\n          token1: position.pool.token1.address,\n          amount0Min: toHex(amount0Min),\n          amount1Min: toHex(amount1Min),\n          tokenId: toHex(addLiquidityOptions.tokenId),\n        },\n      ])\n    }\n  }\n\n  public static encodeApprove(token: Currency, approvalType: ApprovalTypes): string {\n    switch (approvalType) {\n      case ApprovalTypes.MAX:\n        return ApproveAndCall.encodeApproveMax(token.wrapped)\n      case ApprovalTypes.MAX_MINUS_ONE:\n        return ApproveAndCall.encodeApproveMaxMinusOne(token.wrapped)\n      case ApprovalTypes.ZERO_THEN_MAX:\n        return ApproveAndCall.encodeApproveZeroThenMax(token.wrapped)\n      case ApprovalTypes.ZERO_THEN_MAX_MINUS_ONE:\n        return ApproveAndCall.encodeApproveZeroThenMaxMinusOne(token.wrapped)\n      default:\n        throw 'Error: invalid ApprovalType'\n    }\n  }\n}\n","import { Interface } from '@ethersproject/abi'\nimport { BigintIsh } from '@uniswap/sdk-core'\nimport { abi } from '@uniswap/swap-router-contracts/artifacts/contracts/interfaces/IMulticallExtended.sol/IMulticallExtended.json'\nimport { Multicall, toHex } from '@uniswap/v3-sdk'\n\n// deadline or previousBlockhash\nexport type Validation = BigintIsh | string\n\nfunction validateAndParseBytes32(bytes32: string): string {\n  if (!bytes32.match(/^0x[0-9a-fA-F]{64}$/)) {\n    throw new Error(`${bytes32} is not valid bytes32.`)\n  }\n\n  return bytes32.toLowerCase()\n}\n\nexport abstract class MulticallExtended {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static encodeMulticall(calldatas: string | string[], validation?: Validation): string {\n    // if there's no validation, we can just fall back to regular multicall\n    if (typeof validation === 'undefined') {\n      return Multicall.encodeMulticall(calldatas)\n    }\n\n    // if there is validation, we have to normalize calldatas\n    if (!Array.isArray(calldatas)) {\n      calldatas = [calldatas]\n    }\n\n    // this means the validation value should be a previousBlockhash\n    if (typeof validation === 'string' && validation.startsWith('0x')) {\n      const previousBlockhash = validateAndParseBytes32(validation)\n      return MulticallExtended.INTERFACE.encodeFunctionData('multicall(bytes32,bytes[])', [\n        previousBlockhash,\n        calldatas,\n      ])\n    } else {\n      const deadline = toHex(validation)\n      return MulticallExtended.INTERFACE.encodeFunctionData('multicall(uint256,bytes[])', [deadline, calldatas])\n    }\n  }\n}\n","import { Interface } from '@ethersproject/abi'\nimport { Percent, Token, validateAndParseAddress } from '@uniswap/sdk-core'\nimport { abi } from '@uniswap/swap-router-contracts/artifacts/contracts/interfaces/IPeripheryPaymentsWithFeeExtended.sol/IPeripheryPaymentsWithFeeExtended.json'\nimport { FeeOptions, Payments, toHex } from '@uniswap/v3-sdk'\nimport JSBI from 'jsbi'\n\nfunction encodeFeeBips(fee: Percent): string {\n  return toHex(fee.multiply(10_000).quotient)\n}\n\nexport abstract class PaymentsExtended {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static encodeUnwrapWETH9(amountMinimum: JSBI, recipient?: string, feeOptions?: FeeOptions): string {\n    // if there's a recipient, just pass it along\n    if (typeof recipient === 'string') {\n      return Payments.encodeUnwrapWETH9(amountMinimum, recipient, feeOptions)\n    }\n\n    if (!!feeOptions) {\n      const feeBips = encodeFeeBips(feeOptions.fee)\n      const feeRecipient = validateAndParseAddress(feeOptions.recipient)\n\n      return PaymentsExtended.INTERFACE.encodeFunctionData('unwrapWETH9WithFee(uint256,uint256,address)', [\n        toHex(amountMinimum),\n        feeBips,\n        feeRecipient,\n      ])\n    } else {\n      return PaymentsExtended.INTERFACE.encodeFunctionData('unwrapWETH9(uint256)', [toHex(amountMinimum)])\n    }\n  }\n\n  public static encodeSweepToken(\n    token: Token,\n    amountMinimum: JSBI,\n    recipient?: string,\n    feeOptions?: FeeOptions\n  ): string {\n    // if there's a recipient, just pass it along\n    if (typeof recipient === 'string') {\n      return Payments.encodeSweepToken(token, amountMinimum, recipient, feeOptions)\n    }\n\n    if (!!feeOptions) {\n      const feeBips = encodeFeeBips(feeOptions.fee)\n      const feeRecipient = validateAndParseAddress(feeOptions.recipient)\n\n      return PaymentsExtended.INTERFACE.encodeFunctionData('sweepTokenWithFee(address,uint256,uint256,address)', [\n        token.address,\n        toHex(amountMinimum),\n        feeBips,\n        feeRecipient,\n      ])\n    } else {\n      return PaymentsExtended.INTERFACE.encodeFunctionData('sweepToken(address,uint256)', [\n        token.address,\n        toHex(amountMinimum),\n      ])\n    }\n  }\n\n  public static encodePull(token: Token, amount: JSBI): string {\n    return PaymentsExtended.INTERFACE.encodeFunctionData('pull', [token.address, toHex(amount)])\n  }\n\n  public static encodeWrapETH(amount: JSBI): string {\n    return PaymentsExtended.INTERFACE.encodeFunctionData('wrapETH', [toHex(amount)])\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export enum Protocol {\n  V2 = 'V2',\n  V3 = 'V3',\n}\n","import { Route as V2RouteSDK, Pair } from '@uniswap/v2-sdk'\nimport { Route as V3RouteSDK, Pool } from '@uniswap/v3-sdk'\nimport { Protocol } from './protocol'\nimport { Currency, Price, Token } from '@uniswap/sdk-core'\n\nexport interface IRoute<TInput extends Currency, TOutput extends Currency, TPool extends Pool | Pair> {\n  protocol: Protocol\n  // array of pools if v3 or pairs if v2\n  pools: TPool[]\n  path: Token[]\n  midPrice: Price<TInput, TOutput>\n  input: TInput\n  output: TOutput\n}\n\n// V2 route wrapper\nexport class RouteV2<TInput extends Currency, TOutput extends Currency>\n  extends V2RouteSDK<TInput, TOutput>\n  implements IRoute<TInput, TOutput, Pair>\n{\n  public readonly protocol: Protocol = Protocol.V2\n  public readonly pools: Pair[]\n\n  constructor(v2Route: V2RouteSDK<TInput, TOutput>) {\n    super(v2Route.pairs, v2Route.input, v2Route.output)\n    this.pools = this.pairs\n  }\n}\n\n// V3 route wrapper\nexport class RouteV3<TInput extends Currency, TOutput extends Currency>\n  extends V3RouteSDK<TInput, TOutput>\n  implements IRoute<TInput, TOutput, Pool>\n{\n  public readonly protocol: Protocol = Protocol.V3\n  public readonly path: Token[]\n\n  constructor(v3Route: V3RouteSDK<TInput, TOutput>) {\n    super(v3Route.pools, v3Route.input, v3Route.output)\n    this.path = v3Route.tokenPath\n  }\n}\n","import { Currency, CurrencyAmount, Fraction, Percent, Price, TradeType } from '@uniswap/sdk-core'\nimport { Pair, Route as V2RouteSDK, Trade as V2TradeSDK } from '@uniswap/v2-sdk'\nimport { Pool, Route as V3RouteSDK, Trade as V3TradeSDK } from '@uniswap/v3-sdk'\nimport invariant from 'tiny-invariant'\nimport { ONE, ZERO } from '../constants'\nimport { Protocol } from './protocol'\nimport { IRoute, RouteV2, RouteV3 } from './route'\n\nexport class Trade<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType> {\n  public readonly routes: IRoute<TInput, TOutput, Pair | Pool>[]\n  public readonly tradeType: TTradeType\n  private _outputAmount: CurrencyAmount<TOutput> | undefined\n  private _inputAmount: CurrencyAmount<TInput> | undefined\n\n  /**\n   * The swaps of the trade, i.e. which routes and how much is swapped in each that\n   * make up the trade. May consist of swaps in v2 or v3.\n   */\n  public readonly swaps: {\n    route: IRoute<TInput, TOutput, Pair | Pool>\n    inputAmount: CurrencyAmount<TInput>\n    outputAmount: CurrencyAmount<TOutput>\n  }[]\n\n  //  construct a trade across v2 and v3 routes from pre-computed amounts\n  public constructor({\n    v2Routes,\n    v3Routes,\n    tradeType,\n  }: {\n    v2Routes: {\n      routev2: V2RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[]\n    v3Routes: {\n      routev3: V3RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[]\n    tradeType: TTradeType\n  }) {\n    this.swaps = []\n    this.routes = []\n    // wrap v2 routes\n    for (const { routev2, inputAmount, outputAmount } of v2Routes) {\n      const route = new RouteV2(routev2)\n      this.routes.push(route)\n      this.swaps.push({\n        route,\n        inputAmount,\n        outputAmount,\n      })\n    }\n    // wrap v3 routes\n    for (const { routev3, inputAmount, outputAmount } of v3Routes) {\n      const route = new RouteV3(routev3)\n      this.routes.push(route)\n      this.swaps.push({\n        route,\n        inputAmount,\n        outputAmount,\n      })\n    }\n    this.tradeType = tradeType\n\n    // each route must have the same input and output currency\n    const inputCurrency = this.swaps[0].inputAmount.currency\n    const outputCurrency = this.swaps[0].outputAmount.currency\n    invariant(\n      this.swaps.every(({ route }) => inputCurrency.wrapped.equals(route.input.wrapped)),\n      'INPUT_CURRENCY_MATCH'\n    )\n    invariant(\n      this.swaps.every(({ route }) => outputCurrency.wrapped.equals(route.output.wrapped)),\n      'OUTPUT_CURRENCY_MATCH'\n    )\n\n    // pools must be unique inter protocols\n    const numPools = this.swaps.map(({ route }) => route.pools.length).reduce((total, cur) => total + cur, 0)\n    const poolAddressSet = new Set<string>()\n    for (const { route } of this.swaps) {\n      for (const pool of route.pools) {\n        if (route.protocol == Protocol.V3) {\n          poolAddressSet.add(Pool.getAddress(pool.token0, pool.token1, (pool as Pool).fee))\n        } else {\n          const pair = pool\n          poolAddressSet.add(Pair.getAddress(pair.token0, pair.token1))\n        }\n      }\n    }\n    invariant(numPools == poolAddressSet.size, 'POOLS_DUPLICATED')\n  }\n\n  public get inputAmount(): CurrencyAmount<TInput> {\n    if (this._inputAmount) {\n      return this._inputAmount\n    }\n\n    const inputCurrency = this.swaps[0].inputAmount.currency\n    const totalInputFromRoutes = this.swaps\n      .map(({ inputAmount }) => inputAmount)\n      .reduce((total, cur) => total.add(cur), CurrencyAmount.fromRawAmount(inputCurrency, 0))\n\n    this._inputAmount = totalInputFromRoutes\n    return this._inputAmount\n  }\n\n  public get outputAmount(): CurrencyAmount<TOutput> {\n    if (this._outputAmount) {\n      return this._outputAmount\n    }\n\n    const outputCurrency = this.swaps[0].outputAmount.currency\n    const totalOutputFromRoutes = this.swaps\n      .map(({ outputAmount }) => outputAmount)\n      .reduce((total, cur) => total.add(cur), CurrencyAmount.fromRawAmount(outputCurrency, 0))\n\n    this._outputAmount = totalOutputFromRoutes\n    return this._outputAmount\n  }\n\n  private _executionPrice: Price<TInput, TOutput> | undefined\n\n  /**\n   * The price expressed in terms of output amount/input amount.\n   */\n  public get executionPrice(): Price<TInput, TOutput> {\n    return (\n      this._executionPrice ??\n      (this._executionPrice = new Price(\n        this.inputAmount.currency,\n        this.outputAmount.currency,\n        this.inputAmount.quotient,\n        this.outputAmount.quotient\n      ))\n    )\n  }\n\n  /**\n   * The cached result of the price impact computation\n   * @private\n   */\n  private _priceImpact: Percent | undefined\n  /**\n   * Returns the percent difference between the route's mid price and the price impact\n   */\n  public get priceImpact(): Percent {\n    if (this._priceImpact) {\n      return this._priceImpact\n    }\n\n    let spotOutputAmount = CurrencyAmount.fromRawAmount(this.outputAmount.currency, 0)\n    for (const { route, inputAmount } of this.swaps) {\n      const midPrice = route.midPrice\n      spotOutputAmount = spotOutputAmount.add(midPrice.quote(inputAmount))\n    }\n\n    const priceImpact = spotOutputAmount.subtract(this.outputAmount).divide(spotOutputAmount)\n    this._priceImpact = new Percent(priceImpact.numerator, priceImpact.denominator)\n\n    return this._priceImpact\n  }\n\n  /**\n   * Get the minimum amount that must be received from this trade for the given slippage tolerance\n   * @param slippageTolerance The tolerance of unfavorable slippage from the execution price of this trade\n   * @returns The amount out\n   */\n  public minimumAmountOut(slippageTolerance: Percent, amountOut = this.outputAmount): CurrencyAmount<TOutput> {\n    invariant(!slippageTolerance.lessThan(ZERO), 'SLIPPAGE_TOLERANCE')\n    if (this.tradeType === TradeType.EXACT_OUTPUT) {\n      return amountOut\n    } else {\n      const slippageAdjustedAmountOut = new Fraction(ONE)\n        .add(slippageTolerance)\n        .invert()\n        .multiply(amountOut.quotient).quotient\n      return CurrencyAmount.fromRawAmount(amountOut.currency, slippageAdjustedAmountOut)\n    }\n  }\n\n  /**\n   * Get the maximum amount in that can be spent via this trade for the given slippage tolerance\n   * @param slippageTolerance The tolerance of unfavorable slippage from the execution price of this trade\n   * @returns The amount in\n   */\n  public maximumAmountIn(slippageTolerance: Percent, amountIn = this.inputAmount): CurrencyAmount<TInput> {\n    invariant(!slippageTolerance.lessThan(ZERO), 'SLIPPAGE_TOLERANCE')\n    if (this.tradeType === TradeType.EXACT_INPUT) {\n      return amountIn\n    } else {\n      const slippageAdjustedAmountIn = new Fraction(ONE).add(slippageTolerance).multiply(amountIn.quotient).quotient\n      return CurrencyAmount.fromRawAmount(amountIn.currency, slippageAdjustedAmountIn)\n    }\n  }\n\n  /**\n   * Return the execution price after accounting for slippage tolerance\n   * @param slippageTolerance the allowed tolerated slippage\n   * @returns The execution price\n   */\n  public worstExecutionPrice(slippageTolerance: Percent): Price<TInput, TOutput> {\n    return new Price(\n      this.inputAmount.currency,\n      this.outputAmount.currency,\n      this.maximumAmountIn(slippageTolerance).quotient,\n      this.minimumAmountOut(slippageTolerance).quotient\n    )\n  }\n\n  public static async fromRoutes<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType>(\n    v2Routes: {\n      routev2: V2RouteSDK<TInput, TOutput>\n      amount: TTradeType extends TradeType.EXACT_INPUT ? CurrencyAmount<TInput> : CurrencyAmount<TOutput>\n    }[],\n    v3Routes: {\n      routev3: V3RouteSDK<TInput, TOutput>\n      amount: TTradeType extends TradeType.EXACT_INPUT ? CurrencyAmount<TInput> : CurrencyAmount<TOutput>\n    }[],\n    tradeType: TTradeType\n  ): Promise<Trade<TInput, TOutput, TTradeType>> {\n    const populatedV2Routes: {\n      routev2: V2RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[] = []\n\n    const populatedV3Routes: {\n      routev3: V3RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[] = []\n\n    for (const { routev2, amount } of v2Routes) {\n      const v2Trade = new V2TradeSDK(routev2, amount, tradeType)\n      const { inputAmount, outputAmount } = v2Trade\n\n      populatedV2Routes.push({\n        routev2,\n        inputAmount,\n        outputAmount,\n      })\n    }\n\n    for (const { routev3, amount } of v3Routes) {\n      const v3Trade = await V3TradeSDK.fromRoute(routev3, amount, tradeType)\n      const { inputAmount, outputAmount } = v3Trade\n\n      populatedV3Routes.push({\n        routev3,\n        inputAmount,\n        outputAmount,\n      })\n    }\n\n    return new Trade({\n      v2Routes: populatedV2Routes,\n      v3Routes: populatedV3Routes,\n      tradeType,\n    })\n  }\n\n  public static async fromRoute<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType>(\n    route: V2RouteSDK<TInput, TOutput> | V3RouteSDK<TInput, TOutput>,\n    amount: TTradeType extends TradeType.EXACT_INPUT ? CurrencyAmount<TInput> : CurrencyAmount<TOutput>,\n    tradeType: TTradeType\n  ): Promise<Trade<TInput, TOutput, TTradeType>> {\n    let v2Routes: {\n      routev2: V2RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[]\n\n    let v3Routes: {\n      routev3: V3RouteSDK<TInput, TOutput>\n      inputAmount: CurrencyAmount<TInput>\n      outputAmount: CurrencyAmount<TOutput>\n    }[]\n\n    if (route instanceof V2RouteSDK) {\n      const v2Trade = new V2TradeSDK(route, amount, tradeType)\n      const { inputAmount, outputAmount } = v2Trade\n      v2Routes = [{ routev2: route, inputAmount, outputAmount }]\n      v3Routes = []\n    } else {\n      const v3Trade = await V3TradeSDK.fromRoute(route, amount, tradeType)\n      const { inputAmount, outputAmount } = v3Trade\n      v3Routes = [{ routev3: route, inputAmount, outputAmount }]\n      v2Routes = []\n    }\n    return new Trade({\n      v2Routes,\n      v3Routes,\n      tradeType,\n    })\n  }\n}\n","import { Interface } from '@ethersproject/abi'\nimport { Currency, CurrencyAmount, Percent, TradeType, validateAndParseAddress, WETH9 } from '@uniswap/sdk-core'\nimport { abi } from '@uniswap/swap-router-contracts/artifacts/contracts/interfaces/ISwapRouter02.sol/ISwapRouter02.json'\nimport { Trade as V2Trade } from '@uniswap/v2-sdk'\nimport {\n  encodeRouteToPath,\n  FeeOptions,\n  MethodParameters,\n  Payments,\n  PermitOptions,\n  Position,\n  SelfPermit,\n  toHex,\n  Trade as V3Trade,\n} from '@uniswap/v3-sdk'\nimport invariant from 'tiny-invariant'\nimport JSBI from 'jsbi'\nimport { ADDRESS_THIS, MSG_SENDER } from './constants'\nimport { ApproveAndCall, ApprovalTypes, CondensedAddLiquidityOptions } from './approveAndCall'\nimport { Trade } from './entities/trade'\nimport { Protocol } from './entities/protocol'\nimport { RouteV2, RouteV3 } from './entities/route'\nimport { MulticallExtended, Validation } from './multicallExtended'\nimport { PaymentsExtended } from './paymentsExtended'\n\nconst ZERO = JSBI.BigInt(0)\n\n/**\n * Options for producing the arguments to send calls to the router.\n */\nexport interface SwapOptions {\n  /**\n   * How much the execution price is allowed to move unfavorably from the trade execution price.\n   */\n  slippageTolerance: Percent\n\n  /**\n   * The account that should receive the output. If omitted, output is sent to msg.sender.\n   */\n  recipient?: string\n\n  /**\n   * Either deadline (when the transaction expires, in epoch seconds), or previousBlockhash.\n   */\n  deadlineOrPreviousBlockhash?: Validation\n\n  /**\n   * The optional permit parameters for spending the input.\n   */\n  inputTokenPermit?: PermitOptions\n\n  /**\n   * Optional information for taking a fee on output.\n   */\n  fee?: FeeOptions\n}\n\nexport interface SwapAndAddOptions extends SwapOptions {\n  /**\n   * The optional permit parameters for pulling in remaining output token.\n   */\n  outputTokenPermit?: PermitOptions\n}\n\n/**\n * Represents the Uniswap V2 + V3 SwapRouter02, and has static methods for helping execute trades.\n */\nexport abstract class SwapRouter {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  private static encodeV2Swap(\n    trade: V2Trade<Currency, Currency, TradeType>,\n    options: SwapOptions,\n    routerMustCustody: boolean,\n    performAggregatedSlippageCheck: boolean\n  ): string {\n    const amountIn: string = toHex(trade.maximumAmountIn(options.slippageTolerance).quotient)\n    const amountOut: string = toHex(trade.minimumAmountOut(options.slippageTolerance).quotient)\n\n    const path = trade.route.path.map((token) => token.address)\n    const recipient = routerMustCustody\n      ? ADDRESS_THIS\n      : typeof options.recipient === 'undefined'\n      ? MSG_SENDER\n      : validateAndParseAddress(options.recipient)\n\n    if (trade.tradeType === TradeType.EXACT_INPUT) {\n      const exactInputParams = [amountIn, performAggregatedSlippageCheck ? 0 : amountOut, path, recipient]\n\n      return SwapRouter.INTERFACE.encodeFunctionData('swapExactTokensForTokens', exactInputParams)\n    } else {\n      const exactOutputParams = [amountOut, amountIn, path, recipient]\n\n      return SwapRouter.INTERFACE.encodeFunctionData('swapTokensForExactTokens', exactOutputParams)\n    }\n  }\n\n  private static encodeV3Swap(\n    trade: V3Trade<Currency, Currency, TradeType>,\n    options: SwapOptions,\n    routerMustCustody: boolean,\n    performAggregatedSlippageCheck: boolean\n  ): string[] {\n    const calldatas: string[] = []\n\n    for (const { route, inputAmount, outputAmount } of trade.swaps) {\n      const amountIn: string = toHex(trade.maximumAmountIn(options.slippageTolerance, inputAmount).quotient)\n      const amountOut: string = toHex(trade.minimumAmountOut(options.slippageTolerance, outputAmount).quotient)\n\n      // flag for whether the trade is single hop or not\n      const singleHop = route.pools.length === 1\n\n      const recipient = routerMustCustody\n        ? ADDRESS_THIS\n        : typeof options.recipient === 'undefined'\n        ? MSG_SENDER\n        : validateAndParseAddress(options.recipient)\n\n      if (singleHop) {\n        if (trade.tradeType === TradeType.EXACT_INPUT) {\n          const exactInputSingleParams = {\n            tokenIn: route.tokenPath[0].address,\n            tokenOut: route.tokenPath[1].address,\n            fee: route.pools[0].fee,\n            recipient,\n            amountIn,\n            amountOutMinimum: performAggregatedSlippageCheck ? 0 : amountOut,\n            sqrtPriceLimitX96: 0,\n          }\n\n          calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactInputSingle', [exactInputSingleParams]))\n        } else {\n          const exactOutputSingleParams = {\n            tokenIn: route.tokenPath[0].address,\n            tokenOut: route.tokenPath[1].address,\n            fee: route.pools[0].fee,\n            recipient,\n            amountOut,\n            amountInMaximum: amountIn,\n            sqrtPriceLimitX96: 0,\n          }\n\n          calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactOutputSingle', [exactOutputSingleParams]))\n        }\n      } else {\n        const path: string = encodeRouteToPath(route, trade.tradeType === TradeType.EXACT_OUTPUT)\n\n        if (trade.tradeType === TradeType.EXACT_INPUT) {\n          const exactInputParams = {\n            path,\n            recipient,\n            amountIn,\n            amountOutMinimum: performAggregatedSlippageCheck ? 0 : amountOut,\n          }\n\n          calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactInput', [exactInputParams]))\n        } else {\n          const exactOutputParams = {\n            path,\n            recipient,\n            amountOut,\n            amountInMaximum: amountIn,\n          }\n\n          calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactOutput', [exactOutputParams]))\n        }\n      }\n    }\n\n    return calldatas\n  }\n\n  private static encodeSwaps(\n    trades:\n      | Trade<Currency, Currency, TradeType>\n      | V2Trade<Currency, Currency, TradeType>\n      | V3Trade<Currency, Currency, TradeType>\n      | (V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType>)[],\n    options: SwapOptions,\n    isSwapAndAdd?: boolean\n  ): {\n    calldatas: string[]\n    sampleTrade: V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType>\n    routerMustCustody: boolean\n    inputIsNative: boolean\n    outputIsNative: boolean\n    totalAmountIn: CurrencyAmount<Currency>\n    minimumAmountOut: CurrencyAmount<Currency>\n    quoteAmountOut: CurrencyAmount<Currency>\n  } {\n    // If dealing with an instance of the aggregated Trade object, unbundle it to individual V2Trade and V3Trade objects.\n    if (trades instanceof Trade) {\n      invariant(\n        trades.swaps.every((swap) => swap.route.protocol == Protocol.V3 || swap.route.protocol == Protocol.V2),\n        'UNSUPPORTED_PROTOCOL'\n      )\n\n      let v2Andv3Trades: (V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType>)[] = []\n\n      for (const { route, inputAmount, outputAmount } of trades.swaps) {\n        if (route.protocol == Protocol.V2) {\n          v2Andv3Trades.push(\n            new V2Trade(\n              route as RouteV2<Currency, Currency>,\n              trades.tradeType == TradeType.EXACT_INPUT ? inputAmount : outputAmount,\n              trades.tradeType\n            )\n          )\n        } else if (route.protocol == Protocol.V3) {\n          v2Andv3Trades.push(\n            V3Trade.createUncheckedTrade({\n              route: route as RouteV3<Currency, Currency>,\n              inputAmount,\n              outputAmount,\n              tradeType: trades.tradeType,\n            })\n          )\n        }\n      }\n      trades = v2Andv3Trades\n    }\n\n    if (!Array.isArray(trades)) {\n      trades = [trades]\n    }\n\n    const numberOfTrades = trades.reduce(\n      (numberOfTrades, trade) => numberOfTrades + (trade instanceof V3Trade ? trade.swaps.length : 1),\n      0\n    )\n\n    const sampleTrade = trades[0]\n\n    // All trades should have the same starting/ending currency and trade type\n    invariant(\n      trades.every((trade) => trade.inputAmount.currency.equals(sampleTrade.inputAmount.currency)),\n      'TOKEN_IN_DIFF'\n    )\n    invariant(\n      trades.every((trade) => trade.outputAmount.currency.equals(sampleTrade.outputAmount.currency)),\n      'TOKEN_OUT_DIFF'\n    )\n    invariant(\n      trades.every((trade) => trade.tradeType === sampleTrade.tradeType),\n      'TRADE_TYPE_DIFF'\n    )\n\n    const calldatas: string[] = []\n\n    const inputIsNative = sampleTrade.inputAmount.currency.isNative\n    const outputIsNative = sampleTrade.outputAmount.currency.isNative\n\n    // flag for whether we want to perform an aggregated slippage check\n    //   1. when there are >2 exact input trades. this is only a heuristic,\n    //      as it's still more gas-expensive even in this case, but has benefits\n    //      in that the reversion probability is lower\n    const performAggregatedSlippageCheck = sampleTrade.tradeType === TradeType.EXACT_INPUT && numberOfTrades > 2\n    // flag for whether funds should be send first to the router\n    //   1. when receiving ETH (which much be unwrapped from WETH)\n    //   2. when a fee on the output is being taken\n    //   3. when performing swap and add\n    //   4. when performing an aggregated slippage check\n    const routerMustCustody = outputIsNative || !!options.fee || !!isSwapAndAdd || performAggregatedSlippageCheck\n\n    // encode permit if necessary\n    if (options.inputTokenPermit) {\n      invariant(sampleTrade.inputAmount.currency.isToken, 'NON_TOKEN_PERMIT')\n      calldatas.push(SelfPermit.encodePermit(sampleTrade.inputAmount.currency, options.inputTokenPermit))\n    }\n\n    for (const trade of trades) {\n      if (trade instanceof V2Trade) {\n        calldatas.push(SwapRouter.encodeV2Swap(trade, options, routerMustCustody, performAggregatedSlippageCheck))\n      } else {\n        for (const calldata of SwapRouter.encodeV3Swap(\n          trade,\n          options,\n          routerMustCustody,\n          performAggregatedSlippageCheck\n        )) {\n          calldatas.push(calldata)\n        }\n      }\n    }\n\n    const ZERO_IN: CurrencyAmount<Currency> = CurrencyAmount.fromRawAmount(sampleTrade.inputAmount.currency, 0)\n    const ZERO_OUT: CurrencyAmount<Currency> = CurrencyAmount.fromRawAmount(sampleTrade.outputAmount.currency, 0)\n\n    const minimumAmountOut: CurrencyAmount<Currency> = trades.reduce(\n      (sum, trade) => sum.add(trade.minimumAmountOut(options.slippageTolerance)),\n      ZERO_OUT\n    )\n\n    const quoteAmountOut: CurrencyAmount<Currency> = trades.reduce(\n      (sum, trade) => sum.add(trade.outputAmount),\n      ZERO_OUT\n    )\n\n    const totalAmountIn: CurrencyAmount<Currency> = trades.reduce(\n      (sum, trade) => sum.add(trade.maximumAmountIn(options.slippageTolerance)),\n      ZERO_IN\n    )\n\n    return {\n      calldatas,\n      sampleTrade,\n      routerMustCustody,\n      inputIsNative,\n      outputIsNative,\n      totalAmountIn,\n      minimumAmountOut,\n      quoteAmountOut,\n    }\n  }\n\n  /**\n   * Produces the on-chain method name to call and the hex encoded parameters to pass as arguments for a given trade.\n   * @param trade to produce call parameters for\n   * @param options options for the call parameters\n   */\n  public static swapCallParameters(\n    trades:\n      | Trade<Currency, Currency, TradeType>\n      | V2Trade<Currency, Currency, TradeType>\n      | V3Trade<Currency, Currency, TradeType>\n      | (V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType>)[],\n    options: SwapOptions\n  ): MethodParameters {\n    const {\n      calldatas,\n      sampleTrade,\n      routerMustCustody,\n      inputIsNative,\n      outputIsNative,\n      totalAmountIn,\n      minimumAmountOut,\n    } = SwapRouter.encodeSwaps(trades, options)\n\n    // unwrap or sweep\n    if (routerMustCustody) {\n      if (outputIsNative) {\n        calldatas.push(PaymentsExtended.encodeUnwrapWETH9(minimumAmountOut.quotient, options.recipient, options.fee))\n      } else {\n        calldatas.push(\n          PaymentsExtended.encodeSweepToken(\n            sampleTrade.outputAmount.currency.wrapped,\n            minimumAmountOut.quotient,\n            options.recipient,\n            options.fee\n          )\n        )\n      }\n    }\n\n    // must refund when paying in ETH, but with an uncertain input amount\n    if (inputIsNative && sampleTrade.tradeType === TradeType.EXACT_OUTPUT) {\n      calldatas.push(Payments.encodeRefundETH())\n    }\n\n    return {\n      calldata: MulticallExtended.encodeMulticall(calldatas, options.deadlineOrPreviousBlockhash),\n      value: toHex(inputIsNative ? totalAmountIn.quotient : ZERO),\n    }\n  }\n\n  /**\n   * Produces the on-chain method name to call and the hex encoded parameters to pass as arguments for a given trade.\n   * @param trade to produce call parameters for\n   * @param options options for the call parameters\n   */\n  public static swapAndAddCallParameters(\n    trades:\n      | Trade<Currency, Currency, TradeType>\n      | V2Trade<Currency, Currency, TradeType>\n      | V3Trade<Currency, Currency, TradeType>\n      | (V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType>)[],\n    options: SwapAndAddOptions,\n    position: Position,\n    addLiquidityOptions: CondensedAddLiquidityOptions,\n    tokenInApprovalType: ApprovalTypes,\n    tokenOutApprovalType: ApprovalTypes\n  ): MethodParameters {\n    const {\n      calldatas,\n      inputIsNative,\n      outputIsNative,\n      sampleTrade,\n      totalAmountIn: totalAmountSwapped,\n      quoteAmountOut,\n      minimumAmountOut,\n    } = SwapRouter.encodeSwaps(trades, options, true)\n\n    // encode output token permit if necessary\n    if (options.outputTokenPermit) {\n      invariant(quoteAmountOut.currency.isToken, 'NON_TOKEN_PERMIT_OUTPUT')\n      calldatas.push(SelfPermit.encodePermit(quoteAmountOut.currency, options.outputTokenPermit))\n    }\n\n    const chainId = sampleTrade.route.chainId\n    const zeroForOne = position.pool.token0.wrapped.address === totalAmountSwapped.currency.wrapped.address\n    const { positionAmountIn, positionAmountOut } = SwapRouter.getPositionAmounts(position, zeroForOne)\n\n    // if tokens are native they will be converted to WETH9\n    const tokenIn = inputIsNative ? WETH9[chainId] : positionAmountIn.currency.wrapped\n    const tokenOut = outputIsNative ? WETH9[chainId] : positionAmountOut.currency.wrapped\n\n    // if swap output does not make up whole outputTokenBalanceDesired, pull in remaining tokens for adding liquidity\n    const amountOutRemaining = positionAmountOut.subtract(quoteAmountOut.wrapped)\n    if (amountOutRemaining.greaterThan(CurrencyAmount.fromRawAmount(positionAmountOut.currency, 0))) {\n      // if output is native, this means the remaining portion is included as native value in the transaction\n      // and must be wrapped. Otherwise, pull in remaining ERC20 token.\n      outputIsNative\n        ? calldatas.push(PaymentsExtended.encodeWrapETH(amountOutRemaining.quotient))\n        : calldatas.push(PaymentsExtended.encodePull(tokenOut, amountOutRemaining.quotient))\n    }\n\n    // if input is native, convert to WETH9, else pull ERC20 token\n    inputIsNative\n      ? calldatas.push(PaymentsExtended.encodeWrapETH(positionAmountIn.quotient))\n      : calldatas.push(PaymentsExtended.encodePull(tokenIn, positionAmountIn.quotient))\n\n    // approve token balances to NFTManager\n    if (tokenInApprovalType !== ApprovalTypes.NOT_REQUIRED)\n      calldatas.push(ApproveAndCall.encodeApprove(tokenIn, tokenInApprovalType))\n    if (tokenOutApprovalType !== ApprovalTypes.NOT_REQUIRED)\n      calldatas.push(ApproveAndCall.encodeApprove(tokenOut, tokenOutApprovalType))\n\n    // represents a position with token amounts resulting from a swap with maximum slippage\n    // hence the minimal amount out possible.\n    const minimalPosition = Position.fromAmounts({\n      pool: position.pool,\n      tickLower: position.tickLower,\n      tickUpper: position.tickUpper,\n      amount0: zeroForOne ? position.amount0.quotient.toString() : minimumAmountOut.quotient.toString(),\n      amount1: zeroForOne ? minimumAmountOut.quotient.toString() : position.amount1.quotient.toString(),\n      useFullPrecision: false,\n    })\n\n    // encode NFTManager add liquidity\n    calldatas.push(\n      ApproveAndCall.encodeAddLiquidity(position, minimalPosition, addLiquidityOptions, options.slippageTolerance)\n    )\n\n    // sweep remaining tokens\n    inputIsNative\n      ? calldatas.push(PaymentsExtended.encodeUnwrapWETH9(ZERO))\n      : calldatas.push(PaymentsExtended.encodeSweepToken(tokenIn, ZERO))\n    outputIsNative\n      ? calldatas.push(PaymentsExtended.encodeUnwrapWETH9(ZERO))\n      : calldatas.push(PaymentsExtended.encodeSweepToken(tokenOut, ZERO))\n\n    let value: JSBI\n    if (inputIsNative) {\n      value = totalAmountSwapped.wrapped.add(positionAmountIn.wrapped).quotient\n    } else if (outputIsNative) {\n      value = amountOutRemaining.quotient\n    } else {\n      value = ZERO\n    }\n\n    return {\n      calldata: MulticallExtended.encodeMulticall(calldatas, options.deadlineOrPreviousBlockhash),\n      value: value.toString(),\n    }\n  }\n\n  private static getPositionAmounts(\n    position: Position,\n    zeroForOne: boolean\n  ): { positionAmountIn: CurrencyAmount<Currency>; positionAmountOut: CurrencyAmount<Currency> } {\n    const { amount0, amount1 } = position.mintAmounts\n    const currencyAmount0 = CurrencyAmount.fromRawAmount(position.pool.token0, amount0)\n    const currencyAmount1 = CurrencyAmount.fromRawAmount(position.pool.token1, amount1)\n\n    const [positionAmountIn, positionAmountOut] = zeroForOne\n      ? [currencyAmount0, currencyAmount1]\n      : [currencyAmount1, currencyAmount0]\n    return { positionAmountIn, positionAmountOut }\n  }\n}\n"],"names":["MSG_SENDER","ADDRESS_THIS","ZERO","JSBI","BigInt","ONE","ApprovalTypes","isMint","options","Object","keys","some","k","ApproveAndCall","encodeApproveMax","token","INTERFACE","encodeFunctionData","address","encodeApproveMaxMinusOne","encodeApproveZeroThenMax","encodeApproveZeroThenMaxMinusOne","encodeCallPositionManager","calldatas","length","invariant","encodedMulticall","NonfungiblePositionManager","encodeAddLiquidity","position","minimalPosition","addLiquidityOptions","slippageTolerance","mintAmountsWithSlippage","amount0Min","amount0","amount1Min","amount1","lessThan","quotient","token0","pool","token1","fee","tickLower","tickUpper","toHex","recipient","tokenId","encodeApprove","approvalType","MAX","wrapped","MAX_MINUS_ONE","ZERO_THEN_MAX","ZERO_THEN_MAX_MINUS_ONE","Interface","abi","validateAndParseBytes32","bytes32","match","Error","toLowerCase","MulticallExtended","encodeMulticall","validation","Multicall","Array","isArray","startsWith","previousBlockhash","deadline","encodeFeeBips","multiply","PaymentsExtended","encodeUnwrapWETH9","amountMinimum","feeOptions","Payments","feeBips","feeRecipient","validateAndParseAddress","encodeSweepToken","encodePull","amount","encodeWrapETH","undefined","Protocol","RouteV2","v2Route","pairs","input","output","V2","pools","V2RouteSDK","RouteV3","v3Route","V3","path","tokenPath","V3RouteSDK","Trade","v2Routes","v3Routes","tradeType","swaps","routes","routev2","inputAmount","outputAmount","route","push","routev3","inputCurrency","currency","outputCurrency","every","equals","numPools","map","reduce","total","cur","poolAddressSet","Set","protocol","add","Pool","getAddress","pair","Pair","size","minimumAmountOut","amountOut","TradeType","EXACT_OUTPUT","slippageAdjustedAmountOut","Fraction","invert","CurrencyAmount","fromRawAmount","maximumAmountIn","amountIn","EXACT_INPUT","slippageAdjustedAmountIn","worstExecutionPrice","Price","fromRoutes","populatedV2Routes","populatedV3Routes","v2Trade","V2TradeSDK","V3TradeSDK","fromRoute","v3Trade","_inputAmount","totalInputFromRoutes","_outputAmount","totalOutputFromRoutes","_executionPrice","_priceImpact","spotOutputAmount","midPrice","quote","priceImpact","subtract","divide","Percent","numerator","denominator","SwapRouter","encodeV2Swap","trade","routerMustCustody","performAggregatedSlippageCheck","exactInputParams","exactOutputParams","encodeV3Swap","singleHop","exactInputSingleParams","tokenIn","tokenOut","amountOutMinimum","sqrtPriceLimitX96","exactOutputSingleParams","amountInMaximum","encodeRouteToPath","encodeSwaps","trades","isSwapAndAdd","swap","v2Andv3Trades","V2Trade","V3Trade","createUncheckedTrade","numberOfTrades","sampleTrade","inputIsNative","isNative","outputIsNative","inputTokenPermit","isToken","SelfPermit","encodePermit","calldata","ZERO_IN","ZERO_OUT","sum","quoteAmountOut","totalAmountIn","swapCallParameters","encodeRefundETH","deadlineOrPreviousBlockhash","value","swapAndAddCallParameters","tokenInApprovalType","tokenOutApprovalType","totalAmountSwapped","outputTokenPermit","chainId","zeroForOne","getPositionAmounts","positionAmountIn","positionAmountOut","WETH9","amountOutRemaining","greaterThan","NOT_REQUIRED","Position","fromAmounts","toString","useFullPrecision","mintAmounts","currencyAmount0","currencyAmount1"],"mappings":";;;;;;;;;;;IAEaA,UAAU,GAAG;IACbC,YAAY,GAAG;IAEfC,IAAI,gBAAGC,IAAI,CAACC,MAAL,CAAY,CAAZ;IACPC,GAAG,gBAAGF,IAAI,CAACC,MAAL,CAAY,CAAZ;;ICUPE,aAAZ;;AAAA,WAAYA;AACVA,EAAAA,gDAAA,iBAAA;AACAA,EAAAA,uCAAA,QAAA;AACAA,EAAAA,iDAAA,kBAAA;AACAA,EAAAA,iDAAA,kBAAA;AACAA,EAAAA,2DAAA,4BAAA;AACD,CAND,EAAYA,aAAa,KAAbA,aAAa,KAAA,CAAzB;;;AASA,SAAgBC,OAAOC;AACrB,SAAOC,MAAM,CAACC,IAAP,CAAYF,OAAZ,EAAqBG,IAArB,CAA0B,UAACC,CAAD;AAAA,WAAOA,CAAC,KAAK,WAAb;AAAA,GAA1B,CAAP;AACD;AAED,IAAsBC,cAAtB;AAGE;;;AAGA;;AANF,iBAQgBC,gBARhB,GAQS,0BAAwBC,KAAxB;AACL,WAAOF,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,YAA5C,EAA0D,CAACF,KAAK,CAACG,OAAP,CAA1D,CAAP;AACD,GAVH;;AAAA,iBAYgBC,wBAZhB,GAYS,kCAAgCJ,KAAhC;AACL,WAAOF,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,oBAA5C,EAAkE,CAACF,KAAK,CAACG,OAAP,CAAlE,CAAP;AACD,GAdH;;AAAA,iBAgBgBE,wBAhBhB,GAgBS,kCAAgCL,KAAhC;AACL,WAAOF,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,oBAA5C,EAAkE,CAACF,KAAK,CAACG,OAAP,CAAlE,CAAP;AACD,GAlBH;;AAAA,iBAoBgBG,gCApBhB,GAoBS,0CAAwCN,KAAxC;AACL,WAAOF,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,4BAA5C,EAA0E,CAACF,KAAK,CAACG,OAAP,CAA1E,CAAP;AACD,GAtBH;;AAAA,iBAwBgBI,yBAxBhB,GAwBS,mCAAiCC,SAAjC;AACL,MAAUA,SAAS,CAACC,MAAV,GAAmB,CAA7B,4CAAAC,SAAS,QAAuB,eAAvB,CAAT,GAAAA,SAAS,OAAT;;AAEA,QAAIF,SAAS,CAACC,MAAV,IAAoB,CAAxB,EAA2B;AACzB,aAAOX,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,qBAA5C,EAAmEM,SAAnE,CAAP;AACD,KAFD,MAEO;AACL,UAAMG,gBAAgB,GAAGC,0BAA0B,CAACX,SAA3B,CAAqCC,kBAArC,CAAwD,WAAxD,EAAqE,CAACM,SAAD,CAArE,CAAzB;AACA,aAAOV,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,qBAA5C,EAAmE,CAACS,gBAAD,CAAnE,CAAP;AACD;AACF;AACD;;;;;;;AAlCF;;AAAA,iBAyCgBE,kBAzChB,GAyCS,4BACLC,QADK,EAELC,eAFK,EAGLC,mBAHK,EAILC,iBAJK;AAML,gCAAmDH,QAAQ,CAACI,uBAAT,CAAiCD,iBAAjC,CAAnD;AAAA,QAAeE,UAAf,yBAAMC,OAAN;AAAA,QAAoCC,UAApC,yBAA2BC,OAA3B;AAGA;AACA;;;AACA,QAAIlC,IAAI,CAACmC,QAAL,CAAcR,eAAe,CAACK,OAAhB,CAAwBI,QAAtC,EAAgDL,UAAhD,CAAJ,EAAiE;AAC/DA,MAAAA,UAAU,GAAGJ,eAAe,CAACK,OAAhB,CAAwBI,QAArC;AACD;;AACD,QAAIpC,IAAI,CAACmC,QAAL,CAAcR,eAAe,CAACO,OAAhB,CAAwBE,QAAtC,EAAgDH,UAAhD,CAAJ,EAAiE;AAC/DA,MAAAA,UAAU,GAAGN,eAAe,CAACO,OAAhB,CAAwBE,QAArC;AACD;;AAED,QAAIhC,MAAM,CAACwB,mBAAD,CAAV,EAAiC;AAC/B,aAAOlB,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,MAA5C,EAAoD,CACzD;AACEuB,QAAAA,MAAM,EAAEX,QAAQ,CAACY,IAAT,CAAcD,MAAd,CAAqBtB,OAD/B;AAEEwB,QAAAA,MAAM,EAAEb,QAAQ,CAACY,IAAT,CAAcC,MAAd,CAAqBxB,OAF/B;AAGEyB,QAAAA,GAAG,EAAEd,QAAQ,CAACY,IAAT,CAAcE,GAHrB;AAIEC,QAAAA,SAAS,EAAEf,QAAQ,CAACe,SAJtB;AAKEC,QAAAA,SAAS,EAAEhB,QAAQ,CAACgB,SALtB;AAMEX,QAAAA,UAAU,EAAEY,KAAK,CAACZ,UAAD,CANnB;AAOEE,QAAAA,UAAU,EAAEU,KAAK,CAACV,UAAD,CAPnB;AAQEW,QAAAA,SAAS,EAAEhB,mBAAmB,CAACgB;AARjC,OADyD,CAApD,CAAP;AAYD,KAbD,MAaO;AACL,aAAOlC,cAAc,CAACG,SAAf,CAAyBC,kBAAzB,CAA4C,mBAA5C,EAAiE,CACtE;AACEuB,QAAAA,MAAM,EAAEX,QAAQ,CAACY,IAAT,CAAcD,MAAd,CAAqBtB,OAD/B;AAEEwB,QAAAA,MAAM,EAAEb,QAAQ,CAACY,IAAT,CAAcC,MAAd,CAAqBxB,OAF/B;AAGEgB,QAAAA,UAAU,EAAEY,KAAK,CAACZ,UAAD,CAHnB;AAIEE,QAAAA,UAAU,EAAEU,KAAK,CAACV,UAAD,CAJnB;AAKEY,QAAAA,OAAO,EAAEF,KAAK,CAACf,mBAAmB,CAACiB,OAArB;AALhB,OADsE,CAAjE,CAAP;AASD;AACF,GAnFH;;AAAA,iBAqFgBC,aArFhB,GAqFS,uBAAqBlC,KAArB,EAAsCmC,YAAtC;AACL,YAAQA,YAAR;AACE,WAAK5C,aAAa,CAAC6C,GAAnB;AACE,eAAOtC,cAAc,CAACC,gBAAf,CAAgCC,KAAK,CAACqC,OAAtC,CAAP;;AACF,WAAK9C,aAAa,CAAC+C,aAAnB;AACE,eAAOxC,cAAc,CAACM,wBAAf,CAAwCJ,KAAK,CAACqC,OAA9C,CAAP;;AACF,WAAK9C,aAAa,CAACgD,aAAnB;AACE,eAAOzC,cAAc,CAACO,wBAAf,CAAwCL,KAAK,CAACqC,OAA9C,CAAP;;AACF,WAAK9C,aAAa,CAACiD,uBAAnB;AACE,eAAO1C,cAAc,CAACQ,gCAAf,CAAgDN,KAAK,CAACqC,OAAtD,CAAP;;AACF;AACE,cAAM,6BAAN;AAVJ;AAYD,GAlGH;;AAAA;AAAA;AACgBvC,wBAAA,gBAAuB,IAAI2C,SAAJ,CAAcC,GAAd,CAAvB;;ACtBhB,SAASC,uBAAT,CAAiCC,OAAjC;AACE,MAAI,CAACA,OAAO,CAACC,KAAR,CAAc,qBAAd,CAAL,EAA2C;AACzC,UAAM,IAAIC,KAAJ,CAAaF,OAAb,4BAAN;AACD;;AAED,SAAOA,OAAO,CAACG,WAAR,EAAP;AACD;;AAED,IAAsBC,iBAAtB;AAGE;;;AAGA;;AANF,oBAQgBC,eARhB,GAQS,yBAAuBzC,SAAvB,EAAqD0C,UAArD;AACL;AACA,QAAI,OAAOA,UAAP,KAAsB,WAA1B,EAAuC;AACrC,aAAOC,SAAS,CAACF,eAAV,CAA0BzC,SAA1B,CAAP;AACD;;;AAGD,QAAI,CAAC4C,KAAK,CAACC,OAAN,CAAc7C,SAAd,CAAL,EAA+B;AAC7BA,MAAAA,SAAS,GAAG,CAACA,SAAD,CAAZ;AACD;;;AAGD,QAAI,OAAO0C,UAAP,KAAsB,QAAtB,IAAkCA,UAAU,CAACI,UAAX,CAAsB,IAAtB,CAAtC,EAAmE;AACjE,UAAMC,iBAAiB,GAAGZ,uBAAuB,CAACO,UAAD,CAAjD;AACA,aAAOF,iBAAiB,CAAC/C,SAAlB,CAA4BC,kBAA5B,CAA+C,4BAA/C,EAA6E,CAClFqD,iBADkF,EAElF/C,SAFkF,CAA7E,CAAP;AAID,KAND,MAMO;AACL,UAAMgD,QAAQ,GAAGzB,KAAK,CAACmB,UAAD,CAAtB;AACA,aAAOF,iBAAiB,CAAC/C,SAAlB,CAA4BC,kBAA5B,CAA+C,4BAA/C,EAA6E,CAACsD,QAAD,EAAWhD,SAAX,CAA7E,CAAP;AACD;AACF,GA9BH;;AAAA;AAAA;AACgBwC,2BAAA,gBAAuB,IAAIP,SAAJ,CAAcC,KAAd,CAAvB;;ACXhB,SAASe,aAAT,CAAuB7B,GAAvB;AACE,SAAOG,KAAK,CAACH,GAAG,CAAC8B,QAAJ,CAAa,KAAb,EAAqBlC,QAAtB,CAAZ;AACD;;AAED,IAAsBmC,gBAAtB;AAGE;;;AAGA;;AANF,mBAQgBC,iBARhB,GAQS,2BAAyBC,aAAzB,EAA8C7B,SAA9C,EAAkE8B,UAAlE;AACL;AACA,QAAI,OAAO9B,SAAP,KAAqB,QAAzB,EAAmC;AACjC,aAAO+B,QAAQ,CAACH,iBAAT,CAA2BC,aAA3B,EAA0C7B,SAA1C,EAAqD8B,UAArD,CAAP;AACD;;AAED,QAAI,CAAC,CAACA,UAAN,EAAkB;AAChB,UAAME,OAAO,GAAGP,aAAa,CAACK,UAAU,CAAClC,GAAZ,CAA7B;AACA,UAAMqC,YAAY,GAAGC,uBAAuB,CAACJ,UAAU,CAAC9B,SAAZ,CAA5C;AAEA,aAAO2B,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,6CAA9C,EAA6F,CAClG6B,KAAK,CAAC8B,aAAD,CAD6F,EAElGG,OAFkG,EAGlGC,YAHkG,CAA7F,CAAP;AAKD,KATD,MASO;AACL,aAAON,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,sBAA9C,EAAsE,CAAC6B,KAAK,CAAC8B,aAAD,CAAN,CAAtE,CAAP;AACD;AACF,GA1BH;;AAAA,mBA4BgBM,gBA5BhB,GA4BS,0BACLnE,KADK,EAEL6D,aAFK,EAGL7B,SAHK,EAIL8B,UAJK;AAML;AACA,QAAI,OAAO9B,SAAP,KAAqB,QAAzB,EAAmC;AACjC,aAAO+B,QAAQ,CAACI,gBAAT,CAA0BnE,KAA1B,EAAiC6D,aAAjC,EAAgD7B,SAAhD,EAA2D8B,UAA3D,CAAP;AACD;;AAED,QAAI,CAAC,CAACA,UAAN,EAAkB;AAChB,UAAME,OAAO,GAAGP,aAAa,CAACK,UAAU,CAAClC,GAAZ,CAA7B;AACA,UAAMqC,YAAY,GAAGC,uBAAuB,CAACJ,UAAU,CAAC9B,SAAZ,CAA5C;AAEA,aAAO2B,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,oDAA9C,EAAoG,CACzGF,KAAK,CAACG,OADmG,EAEzG4B,KAAK,CAAC8B,aAAD,CAFoG,EAGzGG,OAHyG,EAIzGC,YAJyG,CAApG,CAAP;AAMD,KAVD,MAUO;AACL,aAAON,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,6BAA9C,EAA6E,CAClFF,KAAK,CAACG,OAD4E,EAElF4B,KAAK,CAAC8B,aAAD,CAF6E,CAA7E,CAAP;AAID;AACF,GAvDH;;AAAA,mBAyDgBO,UAzDhB,GAyDS,oBAAkBpE,KAAlB,EAAgCqE,MAAhC;AACL,WAAOV,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,MAA9C,EAAsD,CAACF,KAAK,CAACG,OAAP,EAAgB4B,KAAK,CAACsC,MAAD,CAArB,CAAtD,CAAP;AACD,GA3DH;;AAAA,mBA6DgBC,aA7DhB,GA6DS,uBAAqBD,MAArB;AACL,WAAOV,gBAAgB,CAAC1D,SAAjB,CAA2BC,kBAA3B,CAA8C,SAA9C,EAAyD,CAAC6B,KAAK,CAACsC,MAAD,CAAN,CAAzD,CAAP;AACD,GA/DH;;AAAA;AAAA;AACgBV,0BAAA,gBAAuB,IAAIlB,SAAJ,CAAcC,KAAd,CAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,IAAI,UAAU,OAAO,EAAE;AAClC,AACA;AACA,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC;AAC5B,EAAE,IAAI,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC;AACjC,EAAE,IAAI6B,WAAS,CAAC;AAChB,EAAE,IAAI,OAAO,GAAG,OAAO,MAAM,KAAK,UAAU,GAAG,MAAM,GAAG,EAAE,CAAC;AAC3D,EAAE,IAAI,cAAc,GAAG,OAAO,CAAC,QAAQ,IAAI,YAAY,CAAC;AACxD,EAAE,IAAI,mBAAmB,GAAG,OAAO,CAAC,aAAa,IAAI,iBAAiB,CAAC;AACvE,EAAE,IAAI,iBAAiB,GAAG,OAAO,CAAC,WAAW,IAAI,eAAe,CAAC;AACjE;AACA,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE;AACnC,IAAI,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;AACpC,MAAM,KAAK,EAAE,KAAK;AAClB,MAAM,UAAU,EAAE,IAAI;AACtB,MAAM,YAAY,EAAE,IAAI;AACxB,MAAM,QAAQ,EAAE,IAAI;AACpB,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;AACpB,GAAG;AACH,EAAE,IAAI;AACN;AACA,IAAI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACnB,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,MAAM,GAAG,SAAS,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE;AACvC,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;AAC9B,KAAK,CAAC;AACN,GAAG;AACH;AACA,EAAE,SAAS,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE;AACrD;AACA,IAAI,IAAI,cAAc,GAAG,OAAO,IAAI,OAAO,CAAC,SAAS,YAAY,SAAS,GAAG,OAAO,GAAG,SAAS,CAAC;AACjG,IAAI,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;AAC5D,IAAI,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;AACjD;AACA;AACA;AACA,IAAI,SAAS,CAAC,OAAO,GAAG,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACjE;AACA,IAAI,OAAO,SAAS,CAAC;AACrB,GAAG;AACH,EAAE,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;AAClC,IAAI,IAAI;AACR,MAAM,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC;AACxD,KAAK,CAAC,OAAO,GAAG,EAAE;AAClB,MAAM,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACzC,KAAK;AACL,GAAG;AACH;AACA,EAAE,IAAI,sBAAsB,GAAG,gBAAgB,CAAC;AAChD,EAAE,IAAI,sBAAsB,GAAG,gBAAgB,CAAC;AAChD,EAAE,IAAI,iBAAiB,GAAG,WAAW,CAAC;AACtC,EAAE,IAAI,iBAAiB,GAAG,WAAW,CAAC;AACtC;AACA;AACA;AACA,EAAE,IAAI,gBAAgB,GAAG,EAAE,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,SAAS,GAAG,EAAE;AACzB,EAAE,SAAS,iBAAiB,GAAG,EAAE;AACjC,EAAE,SAAS,0BAA0B,GAAG,EAAE;AAC1C;AACA;AACA;AACA,EAAE,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC7B,EAAE,MAAM,CAAC,iBAAiB,EAAE,cAAc,EAAE,YAAY;AACxD,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC,CAAC;AACL;AACA,EAAE,IAAI,QAAQ,GAAG,MAAM,CAAC,cAAc,CAAC;AACvC,EAAE,IAAI,uBAAuB,GAAG,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3E,EAAE,IAAI,uBAAuB;AAC7B,MAAM,uBAAuB,KAAK,EAAE;AACpC,MAAM,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,cAAc,CAAC,EAAE;AAC5D;AACA;AACA,IAAI,iBAAiB,GAAG,uBAAuB,CAAC;AAChD,GAAG;AACH;AACA,EAAE,IAAI,EAAE,GAAG,0BAA0B,CAAC,SAAS;AAC/C,IAAI,SAAS,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AAC3D,EAAE,iBAAiB,CAAC,SAAS,GAAG,0BAA0B,CAAC;AAC3D,EAAE,MAAM,CAAC,EAAE,EAAE,aAAa,EAAE,0BAA0B,CAAC,CAAC;AACxD,EAAE,MAAM,CAAC,0BAA0B,EAAE,aAAa,EAAE,iBAAiB,CAAC,CAAC;AACvE,EAAE,iBAAiB,CAAC,WAAW,GAAG,MAAM;AACxC,IAAI,0BAA0B;AAC9B,IAAI,iBAAiB;AACrB,IAAI,mBAAmB;AACvB,GAAG,CAAC;AACJ;AACA;AACA;AACA,EAAE,SAAS,qBAAqB,CAAC,SAAS,EAAE;AAC5C,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,SAAS,MAAM,EAAE;AACzD,MAAM,MAAM,CAAC,SAAS,EAAE,MAAM,EAAE,SAAS,GAAG,EAAE;AAC9C,QAAQ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AACzC,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,CAAC;AACP,GAAG;AACH;AACA,EAAE,OAAO,CAAC,mBAAmB,GAAG,SAAS,MAAM,EAAE;AACjD,IAAI,IAAI,IAAI,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,WAAW,CAAC;AAClE,IAAI,OAAO,IAAI;AACf,QAAQ,IAAI,KAAK,iBAAiB;AAClC;AACA;AACA,QAAQ,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI,MAAM,mBAAmB;AAC/D,QAAQ,KAAK,CAAC;AACd,GAAG,CAAC;AACJ;AACA,EAAE,OAAO,CAAC,IAAI,GAAG,SAAS,MAAM,EAAE;AAClC,IAAI,IAAI,MAAM,CAAC,cAAc,EAAE;AAC/B,MAAM,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,0BAA0B,CAAC,CAAC;AAChE,KAAK,MAAM;AACX,MAAM,MAAM,CAAC,SAAS,GAAG,0BAA0B,CAAC;AACpD,MAAM,MAAM,CAAC,MAAM,EAAE,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;AAC7D,KAAK;AACL,IAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACzC,IAAI,OAAO,MAAM,CAAC;AAClB,GAAG,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,CAAC,KAAK,GAAG,SAAS,GAAG,EAAE;AAChC,IAAI,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;AAC5B,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,aAAa,CAAC,SAAS,EAAE,WAAW,EAAE;AACjD,IAAI,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE;AAClD,MAAM,IAAI,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;AAC/D,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,QAAQ,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC3B,OAAO,MAAM;AACb,QAAQ,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;AAChC,QAAQ,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;AACjC,QAAQ,IAAI,KAAK;AACjB,YAAY,OAAO,KAAK,KAAK,QAAQ;AACrC,YAAY,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE;AAC3C,UAAU,OAAO,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,EAAE;AACzE,YAAY,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AACnD,WAAW,EAAE,SAAS,GAAG,EAAE;AAC3B,YAAY,MAAM,CAAC,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAClD,WAAW,CAAC,CAAC;AACb,SAAS;AACT;AACA,QAAQ,OAAO,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,SAAS,EAAE;AACnE;AACA;AACA;AACA,UAAU,MAAM,CAAC,KAAK,GAAG,SAAS,CAAC;AACnC,UAAU,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,SAAS,EAAE,SAAS,KAAK,EAAE;AAC3B;AACA;AACA,UAAU,OAAO,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AACzD,SAAS,CAAC,CAAC;AACX,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,eAAe,CAAC;AACxB;AACA,IAAI,SAAS,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE;AAClC,MAAM,SAAS,0BAA0B,GAAG;AAC5C,QAAQ,OAAO,IAAI,WAAW,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;AACzD,UAAU,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/C,SAAS,CAAC,CAAC;AACX,OAAO;AACP;AACA,MAAM,OAAO,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,eAAe,GAAG,eAAe,CAAC,IAAI;AAC9C,UAAU,0BAA0B;AACpC;AACA;AACA,UAAU,0BAA0B;AACpC,SAAS,GAAG,0BAA0B,EAAE,CAAC;AACzC,KAAK;AACL;AACA;AACA;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,GAAG;AACH;AACA,EAAE,qBAAqB,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;AACjD,EAAE,MAAM,CAAC,aAAa,CAAC,SAAS,EAAE,mBAAmB,EAAE,YAAY;AACnE,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA,EAAE,OAAO,CAAC,KAAK,GAAG,SAAS,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,WAAW,EAAE;AAC7E,IAAI,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE,WAAW,GAAG,OAAO,CAAC;AACtD;AACA,IAAI,IAAI,IAAI,GAAG,IAAI,aAAa;AAChC,MAAM,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,CAAC;AAC/C,MAAM,WAAW;AACjB,KAAK,CAAC;AACN;AACA,IAAI,OAAO,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC;AAC/C,QAAQ,IAAI;AACZ,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,MAAM,EAAE;AAC1C,UAAU,OAAO,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;AAC1D,SAAS,CAAC,CAAC;AACX,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;AACpD,IAAI,IAAI,KAAK,GAAG,sBAAsB,CAAC;AACvC;AACA,IAAI,OAAO,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE;AACxC,MAAM,IAAI,KAAK,KAAK,iBAAiB,EAAE;AACvC,QAAQ,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;AACxD,OAAO;AACP;AACA,MAAM,IAAI,KAAK,KAAK,iBAAiB,EAAE;AACvC,QAAQ,IAAI,MAAM,KAAK,OAAO,EAAE;AAChC,UAAU,MAAM,GAAG,CAAC;AACpB,SAAS;AACT;AACA;AACA;AACA,QAAQ,OAAO,UAAU,EAAE,CAAC;AAC5B,OAAO;AACP;AACA,MAAM,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC9B,MAAM,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AACxB;AACA,MAAM,OAAO,IAAI,EAAE;AACnB,QAAQ,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;AACxC,QAAQ,IAAI,QAAQ,EAAE;AACtB,UAAU,IAAI,cAAc,GAAG,mBAAmB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACtE,UAAU,IAAI,cAAc,EAAE;AAC9B,YAAY,IAAI,cAAc,KAAK,gBAAgB,EAAE,SAAS;AAC9D,YAAY,OAAO,cAAc,CAAC;AAClC,WAAW;AACX,SAAS;AACT;AACA,QAAQ,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM,EAAE;AACvC;AACA;AACA,UAAU,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC;AACrD;AACA,SAAS,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AAC/C,UAAU,IAAI,KAAK,KAAK,sBAAsB,EAAE;AAChD,YAAY,KAAK,GAAG,iBAAiB,CAAC;AACtC,YAAY,MAAM,OAAO,CAAC,GAAG,CAAC;AAC9B,WAAW;AACX;AACA,UAAU,OAAO,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACjD;AACA,SAAS,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,QAAQ,EAAE;AAChD,UAAU,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAChD,SAAS;AACT;AACA,QAAQ,KAAK,GAAG,iBAAiB,CAAC;AAClC;AACA,QAAQ,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACtD,QAAQ,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AACtC;AACA;AACA,UAAU,KAAK,GAAG,OAAO,CAAC,IAAI;AAC9B,cAAc,iBAAiB;AAC/B,cAAc,sBAAsB,CAAC;AACrC;AACA,UAAU,IAAI,MAAM,CAAC,GAAG,KAAK,gBAAgB,EAAE;AAC/C,YAAY,SAAS;AACrB,WAAW;AACX;AACA,UAAU,OAAO;AACjB,YAAY,KAAK,EAAE,MAAM,CAAC,GAAG;AAC7B,YAAY,IAAI,EAAE,OAAO,CAAC,IAAI;AAC9B,WAAW,CAAC;AACZ;AACA,SAAS,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AAC5C,UAAU,KAAK,GAAG,iBAAiB,CAAC;AACpC;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AACnC,UAAU,OAAO,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AACnC,SAAS;AACT,OAAO;AACP,KAAK,CAAC;AACN,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,mBAAmB,CAAC,QAAQ,EAAE,OAAO,EAAE;AAClD,IAAI,IAAI,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACnD,IAAI,IAAI,MAAM,KAAKA,WAAS,EAAE;AAC9B;AACA;AACA,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B;AACA,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AACtC;AACA,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;AACzC;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;AACpC,UAAU,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAClC,UAAU,mBAAmB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACjD;AACA,UAAU,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AAC1C;AACA;AACA,YAAY,OAAO,gBAAgB,CAAC;AACpC,WAAW;AACX,SAAS;AACT;AACA,QAAQ,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AACjC,QAAQ,OAAO,CAAC,GAAG,GAAG,IAAI,SAAS;AACnC,UAAU,gDAAgD,CAAC,CAAC;AAC5D,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAClE;AACA,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACjC,MAAM,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AAC/B,MAAM,OAAO,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/B,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1B;AACA,IAAI,IAAI,EAAE,IAAI,EAAE;AAChB,MAAM,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AAC/B,MAAM,OAAO,CAAC,GAAG,GAAG,IAAI,SAAS,CAAC,kCAAkC,CAAC,CAAC;AACtE,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;AACnB;AACA;AACA,MAAM,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AAChD;AACA;AACA,MAAM,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,QAAQ,EAAE;AACvC,QAAQ,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAChC,QAAQ,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAChC,OAAO;AACP;AACA,KAAK,MAAM;AACX;AACA,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK;AACL;AACA;AACA;AACA,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC5B,IAAI,OAAO,gBAAgB,CAAC;AAC5B,GAAG;AACH;AACA;AACA;AACA,EAAE,qBAAqB,CAAC,EAAE,CAAC,CAAC;AAC5B;AACA,EAAE,MAAM,CAAC,EAAE,EAAE,iBAAiB,EAAE,WAAW,CAAC,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,MAAM,CAAC,EAAE,EAAE,cAAc,EAAE,WAAW;AACxC,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC,CAAC;AACL;AACA,EAAE,MAAM,CAAC,EAAE,EAAE,UAAU,EAAE,WAAW;AACpC,IAAI,OAAO,oBAAoB,CAAC;AAChC,GAAG,CAAC,CAAC;AACL;AACA,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE;AAC9B,IAAI,IAAI,KAAK,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;AACpC;AACA,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAC/B,KAAK;AACL;AACA,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACjC,MAAM,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAC/B,KAAK;AACL;AACA,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChC,GAAG;AACH;AACA,EAAE,SAAS,aAAa,CAAC,KAAK,EAAE;AAChC,IAAI,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC;AACxC,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;AAC3B,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC;AACtB,IAAI,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;AAC9B,GAAG;AACH;AACA,EAAE,SAAS,OAAO,CAAC,WAAW,EAAE;AAChC;AACA;AACA;AACA,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;AAC3C,IAAI,WAAW,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC5C,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACrB,GAAG;AACH;AACA,EAAE,OAAO,CAAC,IAAI,GAAG,SAAS,MAAM,EAAE;AAClC,IAAI,IAAI,IAAI,GAAG,EAAE,CAAC;AAClB,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;AAC5B,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB;AACA;AACA;AACA,IAAI,OAAO,SAAS,IAAI,GAAG;AAC3B,MAAM,OAAO,IAAI,CAAC,MAAM,EAAE;AAC1B,QAAQ,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AAC7B,QAAQ,IAAI,GAAG,IAAI,MAAM,EAAE;AAC3B,UAAU,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;AAC3B,UAAU,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAC5B,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK,CAAC;AACN,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,MAAM,CAAC,QAAQ,EAAE;AAC5B,IAAI,IAAI,QAAQ,EAAE;AAClB,MAAM,IAAI,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC;AACpD,MAAM,IAAI,cAAc,EAAE;AAC1B,QAAQ,OAAO,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7C,OAAO;AACP;AACA,MAAM,IAAI,OAAO,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE;AAC/C,QAAQ,OAAO,QAAQ,CAAC;AACxB,OAAO;AACP;AACA,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;AACnC,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,SAAS,IAAI,GAAG;AAC3C,UAAU,OAAO,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE;AACxC,YAAY,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE;AAC1C,cAAc,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACvC,cAAc,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAChC,cAAc,OAAO,IAAI,CAAC;AAC1B,aAAa;AACb,WAAW;AACX;AACA,UAAU,IAAI,CAAC,KAAK,GAAGA,WAAS,CAAC;AACjC,UAAU,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAC3B;AACA,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS,CAAC;AACV;AACA,QAAQ,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAChC,OAAO;AACP,KAAK;AACL;AACA;AACA,IAAI,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;AAChC,GAAG;AACH,EAAE,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC1B;AACA,EAAE,SAAS,UAAU,GAAG;AACxB,IAAI,OAAO,EAAE,KAAK,EAAEA,WAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;AAC5C,GAAG;AACH;AACA,EAAE,OAAO,CAAC,SAAS,GAAG;AACtB,IAAI,WAAW,EAAE,OAAO;AACxB;AACA,IAAI,KAAK,EAAE,SAAS,aAAa,EAAE;AACnC,MAAM,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACpB,MAAM,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACpB;AACA;AACA,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAGA,WAAS,CAAC;AACzC,MAAM,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AACxB,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC3B;AACA,MAAM,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC3B,MAAM,IAAI,CAAC,GAAG,GAAGA,WAAS,CAAC;AAC3B;AACA,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AAC7C;AACA,MAAM,IAAI,CAAC,aAAa,EAAE;AAC1B,QAAQ,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE;AAC/B;AACA,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;AACpC,cAAc,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;AACrC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;AACtC,YAAY,IAAI,CAAC,IAAI,CAAC,GAAGA,WAAS,CAAC;AACnC,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,EAAE,WAAW;AACrB,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB;AACA,MAAM,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACzC,MAAM,IAAI,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC;AAC5C,MAAM,IAAI,UAAU,CAAC,IAAI,KAAK,OAAO,EAAE;AACvC,QAAQ,MAAM,UAAU,CAAC,GAAG,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,IAAI,CAAC,IAAI,CAAC;AACvB,KAAK;AACL;AACA,IAAI,iBAAiB,EAAE,SAAS,SAAS,EAAE;AAC3C,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;AACrB,QAAQ,MAAM,SAAS,CAAC;AACxB,OAAO;AACP;AACA,MAAM,IAAI,OAAO,GAAG,IAAI,CAAC;AACzB,MAAM,SAAS,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE;AACnC,QAAQ,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;AAC9B,QAAQ,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AAC/B,QAAQ,OAAO,CAAC,IAAI,GAAG,GAAG,CAAC;AAC3B;AACA,QAAQ,IAAI,MAAM,EAAE;AACpB;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAClC,UAAU,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAClC,SAAS;AACT;AACA,QAAQ,OAAO,CAAC,EAAE,MAAM,CAAC;AACzB,OAAO;AACP;AACA,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;AACtC;AACA,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM,EAAE;AACrC;AACA;AACA;AACA,UAAU,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;AAC/B,SAAS;AACT;AACA,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;AACvC,UAAU,IAAI,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;AACxD,UAAU,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;AAC5D;AACA,UAAU,IAAI,QAAQ,IAAI,UAAU,EAAE;AACtC,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE;AAC5C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAClD,aAAa,MAAM,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AACrD,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC9C,aAAa;AACb;AACA,WAAW,MAAM,IAAI,QAAQ,EAAE;AAC/B,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE;AAC5C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAClD,aAAa;AACb;AACA,WAAW,MAAM,IAAI,UAAU,EAAE;AACjC,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AAC9C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC9C,aAAa;AACb;AACA,WAAW,MAAM;AACjB,YAAY,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;AACtE,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,MAAM,EAAE,SAAS,IAAI,EAAE,GAAG,EAAE;AAChC,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI;AACrC,YAAY,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,CAAC;AAC5C,YAAY,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AAC1C,UAAU,IAAI,YAAY,GAAG,KAAK,CAAC;AACnC,UAAU,MAAM;AAChB,SAAS;AACT,OAAO;AACP;AACA,MAAM,IAAI,YAAY;AACtB,WAAW,IAAI,KAAK,OAAO;AAC3B,WAAW,IAAI,KAAK,UAAU,CAAC;AAC/B,UAAU,YAAY,CAAC,MAAM,IAAI,GAAG;AACpC,UAAU,GAAG,IAAI,YAAY,CAAC,UAAU,EAAE;AAC1C;AACA;AACA,QAAQ,YAAY,GAAG,IAAI,CAAC;AAC5B,OAAO;AACP;AACA,MAAM,IAAI,MAAM,GAAG,YAAY,GAAG,YAAY,CAAC,UAAU,GAAG,EAAE,CAAC;AAC/D,MAAM,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,MAAM,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;AACvB;AACA,MAAM,IAAI,YAAY,EAAE;AACxB,QAAQ,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC7B,QAAQ,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,UAAU,CAAC;AAC5C,QAAQ,OAAO,gBAAgB,CAAC;AAChC,OAAO;AACP;AACA,MAAM,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACnC,KAAK;AACL;AACA,IAAI,QAAQ,EAAE,SAAS,MAAM,EAAE,QAAQ,EAAE;AACzC,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC;AACzB,OAAO;AACP;AACA,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO;AACjC,UAAU,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;AACtC,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/B,OAAO,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC3C,QAAQ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1C,QAAQ,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC/B,QAAQ,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAC1B,OAAO,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,QAAQ,EAAE;AACvD,QAAQ,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,MAAM,EAAE,SAAS,UAAU,EAAE;AACjC,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE;AAC7C,UAAU,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC1D,UAAU,aAAa,CAAC,KAAK,CAAC,CAAC;AAC/B,UAAU,OAAO,gBAAgB,CAAC;AAClC,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,OAAO,EAAE,SAAS,MAAM,EAAE;AAC9B,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM,EAAE;AACrC,UAAU,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;AACxC,UAAU,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACvC,YAAY,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;AACpC,YAAY,aAAa,CAAC,KAAK,CAAC,CAAC;AACjC,WAAW;AACX,UAAU,OAAO,MAAM,CAAC;AACxB,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,MAAM,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;AAC/C,KAAK;AACL;AACA,IAAI,aAAa,EAAE,SAAS,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE;AAC3D,MAAM,IAAI,CAAC,QAAQ,GAAG;AACtB,QAAQ,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC;AAClC,QAAQ,UAAU,EAAE,UAAU;AAC9B,QAAQ,OAAO,EAAE,OAAO;AACxB,OAAO,CAAC;AACR;AACA,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;AAClC;AACA;AACA,QAAQ,IAAI,CAAC,GAAG,GAAGA,WAAS,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL,GAAG,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,OAAO,CAAC;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,CAA6B,MAAM,CAAC,OAAO,CAAK;AAClD,CAAC,CAAC,CAAC;AACH;AACA,IAAI;AACJ,EAAE,kBAAkB,GAAG,OAAO,CAAC;AAC/B,CAAC,CAAC,OAAO,oBAAoB,EAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE;AACtC,IAAI,UAAU,CAAC,kBAAkB,GAAG,OAAO,CAAC;AAC5C,GAAG,MAAM;AACT,IAAI,QAAQ,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAAC,OAAO,CAAC,CAAC;AACrD,GAAG;AACH;;;ICjvBYC,QAAZ;;AAAA,WAAYA;AACVA,EAAAA,cAAA,OAAA;AACAA,EAAAA,cAAA,OAAA;AACD,CAHD,EAAYA,QAAQ,KAARA,QAAQ,KAAA,CAApB;;ICgBaC,OAAb;AAAA;;AAOE,mBAAYC,OAAZ;;;AACE,mCAAMA,OAAO,CAACC,KAAd,EAAqBD,OAAO,CAACE,KAA7B,EAAoCF,OAAO,CAACG,MAA5C;AAJc,kBAAA,GAAqBL,QAAQ,CAACM,EAA9B;AAKd,UAAKC,KAAL,GAAa,MAAKJ,KAAlB;;AACD;;AAVH;AAAA,EACUK,KADV;;AAcA,IAAaC,OAAb;AAAA;;AAOE,mBAAYC,OAAZ;;;AACE,oCAAMA,OAAO,CAACH,KAAd,EAAqBG,OAAO,CAACN,KAA7B,EAAoCM,OAAO,CAACL,MAA5C;AAJc,mBAAA,GAAqBL,QAAQ,CAACW,EAA9B;AAKd,WAAKC,IAAL,GAAYF,OAAO,CAACG,SAApB;;AACD;;AAVH;AAAA,EACUC,OADV;;ICtBaC,KAAb;AAgBE;AACA;QACEC,gBAAAA;QACAC,gBAAAA;QACAC,iBAAAA;AAcA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,MAAL,GAAc,EAAd;;AAEA,yDAAqDJ,QAArD,wCAA+D;AAAA;AAAA,UAAlDK,OAAkD,eAAlDA,OAAkD;AAAA,UAAzCC,WAAyC,eAAzCA,WAAyC;AAAA,UAA5BC,YAA4B,eAA5BA,YAA4B;AAC7D,UAAMC,KAAK,GAAG,IAAIvB,OAAJ,CAAYoB,OAAZ,CAAd;AACA,WAAKD,MAAL,CAAYK,IAAZ,CAAiBD,KAAjB;AACA,WAAKL,KAAL,CAAWM,IAAX,CAAgB;AACdD,QAAAA,KAAK,EAALA,KADc;AAEdF,QAAAA,WAAW,EAAXA,WAFc;AAGdC,QAAAA,YAAY,EAAZA;AAHc,OAAhB;AAKD;;;AAED,0DAAqDN,QAArD,2CAA+D;AAAA;AAAA,UAAlDS,OAAkD,gBAAlDA,OAAkD;AAAA,UAAzCJ,YAAyC,gBAAzCA,WAAyC;AAAA,UAA5BC,aAA4B,gBAA5BA,YAA4B;;AAC7D,UAAMC,MAAK,GAAG,IAAIf,OAAJ,CAAYiB,OAAZ,CAAd;;AACA,WAAKN,MAAL,CAAYK,IAAZ,CAAiBD,MAAjB;AACA,WAAKL,KAAL,CAAWM,IAAX,CAAgB;AACdD,QAAAA,KAAK,EAALA,MADc;AAEdF,QAAAA,WAAW,EAAXA,YAFc;AAGdC,QAAAA,YAAY,EAAZA;AAHc,OAAhB;AAKD;;AACD,SAAKL,SAAL,GAAiBA,SAAjB;;AAGA,QAAMS,aAAa,GAAG,KAAKR,KAAL,CAAW,CAAX,EAAcG,WAAd,CAA0BM,QAAhD;AACA,QAAMC,cAAc,GAAG,KAAKV,KAAL,CAAW,CAAX,EAAcI,YAAd,CAA2BK,QAAlD;AACA,KACE,KAAKT,KAAL,CAAWW,KAAX,CAAiB;AAAA,UAAGN,KAAH,SAAGA,KAAH;AAAA,aAAeG,aAAa,CAAC9D,OAAd,CAAsBkE,MAAtB,CAA6BP,KAAK,CAACpB,KAAN,CAAYvC,OAAzC,CAAf;AAAA,KAAjB,CADF,2CAAA3B,SAAS,QAEP,sBAFO,CAAT,GAAAA,SAAS,OAAT;AAIA,KACE,KAAKiF,KAAL,CAAWW,KAAX,CAAiB;AAAA,UAAGN,KAAH,SAAGA,KAAH;AAAA,aAAeK,cAAc,CAAChE,OAAf,CAAuBkE,MAAvB,CAA8BP,KAAK,CAACnB,MAAN,CAAaxC,OAA3C,CAAf;AAAA,KAAjB,CADF,2CAAA3B,SAAS,QAEP,uBAFO,CAAT,GAAAA,SAAS,OAAT;;AAMA,QAAM8F,QAAQ,GAAG,KAAKb,KAAL,CAAWc,GAAX,CAAe;AAAA,UAAGT,KAAH,SAAGA,KAAH;AAAA,aAAeA,KAAK,CAACjB,KAAN,CAAYtE,MAA3B;AAAA,KAAf,EAAkDiG,MAAlD,CAAyD,UAACC,KAAD,EAAQC,GAAR;AAAA,aAAgBD,KAAK,GAAGC,GAAxB;AAAA,KAAzD,EAAsF,CAAtF,CAAjB;AACA,QAAMC,cAAc,GAAG,IAAIC,GAAJ,EAAvB;;AACA,0DAAwB,KAAKnB,KAA7B,2CAAoC;AAAA,UAAvBK,OAAuB,gBAAvBA,KAAuB;;AAClC,4DAAmBA,OAAK,CAACjB,KAAzB,2CAAgC;AAAA,YAArBrD,IAAqB;;AAC9B,YAAIsE,OAAK,CAACe,QAAN,IAAkBvC,QAAQ,CAACW,EAA/B,EAAmC;AACjC0B,UAAAA,cAAc,CAACG,GAAf,CAAmBC,IAAI,CAACC,UAAL,CAAgBxF,IAAI,CAACD,MAArB,EAA6BC,IAAI,CAACC,MAAlC,EAA2CD,IAAa,CAACE,GAAzD,CAAnB;AACD,SAFD,MAEO;AACL,cAAMuF,IAAI,GAAGzF,IAAb;AACAmF,UAAAA,cAAc,CAACG,GAAf,CAAmBI,IAAI,CAACF,UAAL,CAAgBC,IAAI,CAAC1F,MAArB,EAA6B0F,IAAI,CAACxF,MAAlC,CAAnB;AACD;AACF;AACF;;AACD,MAAU6E,QAAQ,IAAIK,cAAc,CAACQ,IAArC,4CAAA3G,SAAS,QAAkC,kBAAlC,CAAT,GAAAA,SAAS,OAAT;AACD;;AApFH;;AA4JE;;;;;AA5JF,SAiKS4G,gBAjKT,GAiKS,0BAAiBrG,iBAAjB,EAA6CsG,SAA7C;QAA6CA;AAAAA,MAAAA,YAAY,KAAKxB;;;AACnE,KAAU,CAAC9E,iBAAiB,CAACM,QAAlB,CAA2BpC,IAA3B,CAAX,2CAAAuB,SAAS,QAAoC,oBAApC,CAAT,GAAAA,SAAS,OAAT;;AACA,QAAI,KAAKgF,SAAL,KAAmB8B,SAAS,CAACC,YAAjC,EAA+C;AAC7C,aAAOF,SAAP;AACD,KAFD,MAEO;AACL,UAAMG,yBAAyB,GAAG,IAAIC,QAAJ,CAAarI,GAAb,EAC/B0H,GAD+B,CAC3B/F,iBAD2B,EAE/B2G,MAF+B,GAG/BlE,QAH+B,CAGtB6D,SAAS,CAAC/F,QAHY,EAGFA,QAHhC;AAIA,aAAOqG,cAAc,CAACC,aAAf,CAA6BP,SAAS,CAACnB,QAAvC,EAAiDsB,yBAAjD,CAAP;AACD;AACF;AAED;;;;;AA9KF;;AAAA,SAmLSK,eAnLT,GAmLS,yBAAgB9G,iBAAhB,EAA4C+G,QAA5C;QAA4CA;AAAAA,MAAAA,WAAW,KAAKlC;;;AACjE,KAAU,CAAC7E,iBAAiB,CAACM,QAAlB,CAA2BpC,IAA3B,CAAX,2CAAAuB,SAAS,QAAoC,oBAApC,CAAT,GAAAA,SAAS,OAAT;;AACA,QAAI,KAAKgF,SAAL,KAAmB8B,SAAS,CAACS,WAAjC,EAA8C;AAC5C,aAAOD,QAAP;AACD,KAFD,MAEO;AACL,UAAME,wBAAwB,GAAG,IAAIP,QAAJ,CAAarI,GAAb,EAAkB0H,GAAlB,CAAsB/F,iBAAtB,EAAyCyC,QAAzC,CAAkDsE,QAAQ,CAACxG,QAA3D,EAAqEA,QAAtG;AACA,aAAOqG,cAAc,CAACC,aAAf,CAA6BE,QAAQ,CAAC5B,QAAtC,EAAgD8B,wBAAhD,CAAP;AACD;AACF;AAED;;;;;AA7LF;;AAAA,SAkMSC,mBAlMT,GAkMS,6BAAoBlH,iBAApB;AACL,WAAO,IAAImH,KAAJ,CACL,KAAKtC,WAAL,CAAiBM,QADZ,EAEL,KAAKL,YAAL,CAAkBK,QAFb,EAGL,KAAK2B,eAAL,CAAqB9G,iBAArB,EAAwCO,QAHnC,EAIL,KAAK8F,gBAAL,CAAsBrG,iBAAtB,EAAyCO,QAJpC,CAAP;AAMD,GAzMH;;AAAA,QA2MsB6G,UA3MtB;AAAA,kFA2MS,iBACL7C,QADK,EAKLC,QALK,EASLC,SATK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAWC4C,cAAAA,iBAXD,GAeC,EAfD;AAiBCC,cAAAA,iBAjBD,GAqBC,EArBD;;AAuBL,gEAAkC/C,QAAlC,mCAA4C;AAAA,6CAA/BK,OAA+B,gBAA/BA,OAA+B,EAAtBxB,MAAsB,gBAAtBA,MAAsB;AACpCmE,gBAAAA,OADoC,GAC1B,IAAIC,OAAJ,CAAe5C,OAAf,EAAwBxB,MAAxB,EAAgCqB,SAAhC,CAD0B;AAElCI,gBAAAA,WAFkC,GAEJ0C,OAFI,CAElC1C,WAFkC,EAErBC,YAFqB,GAEJyC,OAFI,CAErBzC,YAFqB;AAI1CuC,gBAAAA,iBAAiB,CAACrC,IAAlB,CAAuB;AACrBJ,kBAAAA,OAAO,EAAPA,OADqB;AAErBC,kBAAAA,WAAW,EAAXA,WAFqB;AAGrBC,kBAAAA,YAAY,EAAZA;AAHqB,iBAAvB;AAKD;;AAhCI,2DAkC6BN,QAlC7B;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,2CAkCQS,OAlCR,gBAkCQA,OAlCR,EAkCiB7B,OAlCjB,gBAkCiBA,MAlCjB;AAAA;AAAA,qBAmCmBqE,OAAU,CAACC,SAAX,CAAqBzC,OAArB,EAA8B7B,OAA9B,EAAsCqB,SAAtC,CAnCnB;;AAAA;AAmCGkD,cAAAA,OAnCH;AAoCK9C,cAAAA,aApCL,GAoCmC8C,OApCnC,CAoCK9C,WApCL,EAoCkBC,cApClB,GAoCmC6C,OApCnC,CAoCkB7C,YApClB;AAsCHwC,cAAAA,iBAAiB,CAACtC,IAAlB,CAAuB;AACrBC,gBAAAA,OAAO,EAAPA,OADqB;AAErBJ,gBAAAA,WAAW,EAAXA,aAFqB;AAGrBC,gBAAAA,YAAY,EAAZA;AAHqB,eAAvB;;AAtCG;AAAA;AAAA;;AAAA;AAAA,+CA6CE,IAAIR,KAAJ,CAAU;AACfC,gBAAAA,QAAQ,EAAE8C,iBADK;AAEf7C,gBAAAA,QAAQ,EAAE8C,iBAFK;AAGf7C,gBAAAA,SAAS,EAATA;AAHe,eAAV,CA7CF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA3MT;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,QA+PsBiD,SA/PtB;AAAA,iFA+PS,kBACL3C,KADK,EAEL3B,MAFK,EAGLqB,SAHK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBAiBDM,KAAK,YAAYhB,KAjBhB;AAAA;AAAA;AAAA;;AAkBGwD,cAAAA,OAlBH,GAkBa,IAAIC,OAAJ,CAAezC,KAAf,EAAsB3B,MAAtB,EAA8BqB,SAA9B,CAlBb;AAmBKI,cAAAA,WAnBL,GAmBmC0C,OAnBnC,CAmBK1C,WAnBL,EAmBkBC,YAnBlB,GAmBmCyC,OAnBnC,CAmBkBzC,YAnBlB;AAoBHP,cAAAA,QAAQ,GAAG,CAAC;AAAEK,gBAAAA,OAAO,EAAEG,KAAX;AAAkBF,gBAAAA,WAAW,EAAXA,WAAlB;AAA+BC,gBAAAA,YAAY,EAAZA;AAA/B,eAAD,CAAX;AACAN,cAAAA,QAAQ,GAAG,EAAX;AArBG;AAAA;;AAAA;AAAA;AAAA,qBAuBmBiD,OAAU,CAACC,SAAX,CAAqB3C,KAArB,EAA4B3B,MAA5B,EAAoCqB,SAApC,CAvBnB;;AAAA;AAuBGkD,cAAAA,OAvBH;AAwBK9C,cAAAA,aAxBL,GAwBmC8C,OAxBnC,CAwBK9C,WAxBL,EAwBkBC,cAxBlB,GAwBmC6C,OAxBnC,CAwBkB7C,YAxBlB;AAyBHN,cAAAA,QAAQ,GAAG,CAAC;AAAES,gBAAAA,OAAO,EAAEF,KAAX;AAAkBF,gBAAAA,WAAW,EAAXA,aAAlB;AAA+BC,gBAAAA,YAAY,EAAZA;AAA/B,eAAD,CAAX;AACAP,cAAAA,QAAQ,GAAG,EAAX;;AA1BG;AAAA,gDA4BE,IAAID,KAAJ,CAAU;AACfC,gBAAAA,QAAQ,EAARA,QADe;AAEfC,gBAAAA,QAAQ,EAARA,QAFe;AAGfC,gBAAAA,SAAS,EAATA;AAHe,eAAV,CA5BF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA/PT;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,SAsFE;AACE,UAAI,KAAKmD,YAAT,EAAuB;AACrB,eAAO,KAAKA,YAAZ;AACD;;AAED,UAAM1C,aAAa,GAAG,KAAKR,KAAL,CAAW,CAAX,EAAcG,WAAd,CAA0BM,QAAhD;AACA,UAAM0C,oBAAoB,GAAG,KAAKnD,KAAL,CAC1Bc,GAD0B,CACtB;AAAA,YAAGX,WAAH,SAAGA,WAAH;AAAA,eAAqBA,WAArB;AAAA,OADsB,EAE1BY,MAF0B,CAEnB,UAACC,KAAD,EAAQC,GAAR;AAAA,eAAgBD,KAAK,CAACK,GAAN,CAAUJ,GAAV,CAAhB;AAAA,OAFmB,EAEaiB,cAAc,CAACC,aAAf,CAA6B3B,aAA7B,EAA4C,CAA5C,CAFb,CAA7B;AAIA,WAAK0C,YAAL,GAAoBC,oBAApB;AACA,aAAO,KAAKD,YAAZ;AACD;AAlGH;AAAA;AAAA,SAoGE;AACE,UAAI,KAAKE,aAAT,EAAwB;AACtB,eAAO,KAAKA,aAAZ;AACD;;AAED,UAAM1C,cAAc,GAAG,KAAKV,KAAL,CAAW,CAAX,EAAcI,YAAd,CAA2BK,QAAlD;AACA,UAAM4C,qBAAqB,GAAG,KAAKrD,KAAL,CAC3Bc,GAD2B,CACvB;AAAA,YAAGV,YAAH,SAAGA,YAAH;AAAA,eAAsBA,YAAtB;AAAA,OADuB,EAE3BW,MAF2B,CAEpB,UAACC,KAAD,EAAQC,GAAR;AAAA,eAAgBD,KAAK,CAACK,GAAN,CAAUJ,GAAV,CAAhB;AAAA,OAFoB,EAEYiB,cAAc,CAACC,aAAf,CAA6BzB,cAA7B,EAA6C,CAA7C,CAFZ,CAA9B;AAIA,WAAK0C,aAAL,GAAqBC,qBAArB;AACA,aAAO,KAAKD,aAAZ;AACD;AAID;;;;AApHF;AAAA;AAAA,SAuHE;;;AACE,sCACE,KAAKE,eADP,oCAEG,KAAKA,eAAL,GAAuB,IAAIb,KAAJ,CACtB,KAAKtC,WAAL,CAAiBM,QADK,EAEtB,KAAKL,YAAL,CAAkBK,QAFI,EAGtB,KAAKN,WAAL,CAAiBtE,QAHK,EAItB,KAAKuE,YAAL,CAAkBvE,QAJI,CAF1B;AASD;AAOD;;;;AAxIF;AAAA;AAAA,SA2IE;AACE,UAAI,KAAK0H,YAAT,EAAuB;AACrB,eAAO,KAAKA,YAAZ;AACD;;AAED,UAAIC,gBAAgB,GAAGtB,cAAc,CAACC,aAAf,CAA6B,KAAK/B,YAAL,CAAkBK,QAA/C,EAAyD,CAAzD,CAAvB;;AACA,4DAAqC,KAAKT,KAA1C,2CAAiD;AAAA;AAAA,YAApCK,KAAoC,gBAApCA,KAAoC;AAAA,YAA7BF,WAA6B,gBAA7BA,WAA6B;AAC/C,YAAMsD,QAAQ,GAAGpD,KAAK,CAACoD,QAAvB;AACAD,QAAAA,gBAAgB,GAAGA,gBAAgB,CAACnC,GAAjB,CAAqBoC,QAAQ,CAACC,KAAT,CAAevD,WAAf,CAArB,CAAnB;AACD;;AAED,UAAMwD,WAAW,GAAGH,gBAAgB,CAACI,QAAjB,CAA0B,KAAKxD,YAA/B,EAA6CyD,MAA7C,CAAoDL,gBAApD,CAApB;AACA,WAAKD,YAAL,GAAoB,IAAIO,OAAJ,CAAYH,WAAW,CAACI,SAAxB,EAAmCJ,WAAW,CAACK,WAA/C,CAApB;AAEA,aAAO,KAAKT,YAAZ;AACD;AA1JH;;AAAA;AAAA;;ACiBA,IAAM/J,MAAI,gBAAGC,IAAI,CAACC,MAAL,CAAY,CAAZ,CAAb;AAuCA;;;;AAGA,IAAsBuK,UAAtB;AAGE;;;AAGA;;AANF,aAQiBC,YARjB,GAQU,sBACNC,KADM,EAENrK,OAFM,EAGNsK,iBAHM,EAINC,8BAJM;AAMN,QAAMhC,QAAQ,GAAWjG,KAAK,CAAC+H,KAAK,CAAC/B,eAAN,CAAsBtI,OAAO,CAACwB,iBAA9B,EAAiDO,QAAlD,CAA9B;AACA,QAAM+F,SAAS,GAAWxF,KAAK,CAAC+H,KAAK,CAACxC,gBAAN,CAAuB7H,OAAO,CAACwB,iBAA/B,EAAkDO,QAAnD,CAA/B;AAEA,QAAM4D,IAAI,GAAG0E,KAAK,CAAC9D,KAAN,CAAYZ,IAAZ,CAAiBqB,GAAjB,CAAqB,UAACzG,KAAD;AAAA,aAAWA,KAAK,CAACG,OAAjB;AAAA,KAArB,CAAb;AACA,QAAM6B,SAAS,GAAG+H,iBAAiB,GAC/B7K,YAD+B,GAE/B,OAAOO,OAAO,CAACuC,SAAf,KAA6B,WAA7B,GACA/C,UADA,GAEAiF,uBAAuB,CAACzE,OAAO,CAACuC,SAAT,CAJ3B;;AAMA,QAAI8H,KAAK,CAACpE,SAAN,KAAoB8B,SAAS,CAACS,WAAlC,EAA+C;AAC7C,UAAMgC,gBAAgB,GAAG,CAACjC,QAAD,EAAWgC,8BAA8B,GAAG,CAAH,GAAOzC,SAAhD,EAA2DnC,IAA3D,EAAiEpD,SAAjE,CAAzB;AAEA,aAAO4H,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,0BAAxC,EAAoE+J,gBAApE,CAAP;AACD,KAJD,MAIO;AACL,UAAMC,iBAAiB,GAAG,CAAC3C,SAAD,EAAYS,QAAZ,EAAsB5C,IAAtB,EAA4BpD,SAA5B,CAA1B;AAEA,aAAO4H,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,0BAAxC,EAAoEgK,iBAApE,CAAP;AACD;AACF,GAjCH;;AAAA,aAmCiBC,YAnCjB,GAmCU,sBACNL,KADM,EAENrK,OAFM,EAGNsK,iBAHM,EAINC,8BAJM;AAMN,QAAMxJ,SAAS,GAAa,EAA5B;;AAEA,yDAAmDsJ,KAAK,CAACnE,KAAzD,wCAAgE;AAAA;AAAA,UAAnDK,KAAmD,eAAnDA,KAAmD;AAAA,UAA5CF,WAA4C,eAA5CA,WAA4C;AAAA,UAA/BC,YAA+B,eAA/BA,YAA+B;AAC9D,UAAMiC,QAAQ,GAAWjG,KAAK,CAAC+H,KAAK,CAAC/B,eAAN,CAAsBtI,OAAO,CAACwB,iBAA9B,EAAiD6E,WAAjD,EAA8DtE,QAA/D,CAA9B;AACA,UAAM+F,SAAS,GAAWxF,KAAK,CAAC+H,KAAK,CAACxC,gBAAN,CAAuB7H,OAAO,CAACwB,iBAA/B,EAAkD8E,YAAlD,EAAgEvE,QAAjE,CAA/B,CAF8D;;AAK9D,UAAM4I,SAAS,GAAGpE,KAAK,CAACjB,KAAN,CAAYtE,MAAZ,KAAuB,CAAzC;AAEA,UAAMuB,SAAS,GAAG+H,iBAAiB,GAC/B7K,YAD+B,GAE/B,OAAOO,OAAO,CAACuC,SAAf,KAA6B,WAA7B,GACA/C,UADA,GAEAiF,uBAAuB,CAACzE,OAAO,CAACuC,SAAT,CAJ3B;;AAMA,UAAIoI,SAAJ,EAAe;AACb,YAAIN,KAAK,CAACpE,SAAN,KAAoB8B,SAAS,CAACS,WAAlC,EAA+C;AAC7C,cAAMoC,sBAAsB,GAAG;AAC7BC,YAAAA,OAAO,EAAEtE,KAAK,CAACX,SAAN,CAAgB,CAAhB,EAAmBlF,OADC;AAE7BoK,YAAAA,QAAQ,EAAEvE,KAAK,CAACX,SAAN,CAAgB,CAAhB,EAAmBlF,OAFA;AAG7ByB,YAAAA,GAAG,EAAEoE,KAAK,CAACjB,KAAN,CAAY,CAAZ,EAAenD,GAHS;AAI7BI,YAAAA,SAAS,EAATA,SAJ6B;AAK7BgG,YAAAA,QAAQ,EAARA,QAL6B;AAM7BwC,YAAAA,gBAAgB,EAAER,8BAA8B,GAAG,CAAH,GAAOzC,SAN1B;AAO7BkD,YAAAA,iBAAiB,EAAE;AAPU,WAA/B;AAUAjK,UAAAA,SAAS,CAACyF,IAAV,CAAe2D,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,kBAAxC,EAA4D,CAACmK,sBAAD,CAA5D,CAAf;AACD,SAZD,MAYO;AACL,cAAMK,uBAAuB,GAAG;AAC9BJ,YAAAA,OAAO,EAAEtE,KAAK,CAACX,SAAN,CAAgB,CAAhB,EAAmBlF,OADE;AAE9BoK,YAAAA,QAAQ,EAAEvE,KAAK,CAACX,SAAN,CAAgB,CAAhB,EAAmBlF,OAFC;AAG9ByB,YAAAA,GAAG,EAAEoE,KAAK,CAACjB,KAAN,CAAY,CAAZ,EAAenD,GAHU;AAI9BI,YAAAA,SAAS,EAATA,SAJ8B;AAK9BuF,YAAAA,SAAS,EAATA,SAL8B;AAM9BoD,YAAAA,eAAe,EAAE3C,QANa;AAO9ByC,YAAAA,iBAAiB,EAAE;AAPW,WAAhC;AAUAjK,UAAAA,SAAS,CAACyF,IAAV,CAAe2D,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,mBAAxC,EAA6D,CAACwK,uBAAD,CAA7D,CAAf;AACD;AACF,OA1BD,MA0BO;AACL,YAAMtF,IAAI,GAAWwF,iBAAiB,CAAC5E,KAAD,EAAQ8D,KAAK,CAACpE,SAAN,KAAoB8B,SAAS,CAACC,YAAtC,CAAtC;;AAEA,YAAIqC,KAAK,CAACpE,SAAN,KAAoB8B,SAAS,CAACS,WAAlC,EAA+C;AAC7C,cAAMgC,gBAAgB,GAAG;AACvB7E,YAAAA,IAAI,EAAJA,IADuB;AAEvBpD,YAAAA,SAAS,EAATA,SAFuB;AAGvBgG,YAAAA,QAAQ,EAARA,QAHuB;AAIvBwC,YAAAA,gBAAgB,EAAER,8BAA8B,GAAG,CAAH,GAAOzC;AAJhC,WAAzB;AAOA/G,UAAAA,SAAS,CAACyF,IAAV,CAAe2D,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,YAAxC,EAAsD,CAAC+J,gBAAD,CAAtD,CAAf;AACD,SATD,MASO;AACL,cAAMC,iBAAiB,GAAG;AACxB9E,YAAAA,IAAI,EAAJA,IADwB;AAExBpD,YAAAA,SAAS,EAATA,SAFwB;AAGxBuF,YAAAA,SAAS,EAATA,SAHwB;AAIxBoD,YAAAA,eAAe,EAAE3C;AAJO,WAA1B;AAOAxH,UAAAA,SAAS,CAACyF,IAAV,CAAe2D,UAAU,CAAC3J,SAAX,CAAqBC,kBAArB,CAAwC,aAAxC,EAAuD,CAACgK,iBAAD,CAAvD,CAAf;AACD;AACF;AACF;;AAED,WAAO1J,SAAP;AACD,GA5GH;;AAAA,aA8GiBqK,WA9GjB,GA8GU,qBACNC,MADM,EAMNrL,OANM,EAONsL,YAPM;AAkBN;AACA,QAAID,MAAM,YAAYvF,KAAtB,EAA6B;AAC3B,OACEuF,MAAM,CAACnF,KAAP,CAAaW,KAAb,CAAmB,UAAC0E,IAAD;AAAA,eAAUA,IAAI,CAAChF,KAAL,CAAWe,QAAX,IAAuBvC,QAAQ,CAACW,EAAhC,IAAsC6F,IAAI,CAAChF,KAAL,CAAWe,QAAX,IAAuBvC,QAAQ,CAACM,EAAhF;AAAA,OAAnB,CADF,2CAAApE,SAAS,QAEP,sBAFO,CAAT,GAAAA,SAAS,OAAT;AAKA,UAAIuK,aAAa,GAAwF,EAAzG;;AAEA,4DAAmDH,MAAM,CAACnF,KAA1D,2CAAiE;AAAA;AAAA,YAApDK,KAAoD,gBAApDA,KAAoD;AAAA,YAA7CF,WAA6C,gBAA7CA,WAA6C;AAAA,YAAhCC,YAAgC,gBAAhCA,YAAgC;;AAC/D,YAAIC,KAAK,CAACe,QAAN,IAAkBvC,QAAQ,CAACM,EAA/B,EAAmC;AACjCmG,UAAAA,aAAa,CAAChF,IAAd,CACE,IAAIiF,OAAJ,CACElF,KADF,EAEE8E,MAAM,CAACpF,SAAP,IAAoB8B,SAAS,CAACS,WAA9B,GAA4CnC,WAA5C,GAA0DC,YAF5D,EAGE+E,MAAM,CAACpF,SAHT,CADF;AAOD,SARD,MAQO,IAAIM,KAAK,CAACe,QAAN,IAAkBvC,QAAQ,CAACW,EAA/B,EAAmC;AACxC8F,UAAAA,aAAa,CAAChF,IAAd,CACEkF,OAAO,CAACC,oBAAR,CAA6B;AAC3BpF,YAAAA,KAAK,EAAEA,KADoB;AAE3BF,YAAAA,WAAW,EAAXA,WAF2B;AAG3BC,YAAAA,YAAY,EAAZA,YAH2B;AAI3BL,YAAAA,SAAS,EAAEoF,MAAM,CAACpF;AAJS,WAA7B,CADF;AAQD;AACF;;AACDoF,MAAAA,MAAM,GAAGG,aAAT;AACD;;AAED,QAAI,CAAC7H,KAAK,CAACC,OAAN,CAAcyH,MAAd,CAAL,EAA4B;AAC1BA,MAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;AACD;;AAED,QAAMO,cAAc,GAAGP,MAAM,CAACpE,MAAP,CACrB,UAAC2E,cAAD,EAAiBvB,KAAjB;AAAA,aAA2BuB,cAAc,IAAIvB,KAAK,YAAYqB,OAAjB,GAA2BrB,KAAK,CAACnE,KAAN,CAAYlF,MAAvC,GAAgD,CAApD,CAAzC;AAAA,KADqB,EAErB,CAFqB,CAAvB;AAKA,QAAM6K,WAAW,GAAGR,MAAM,CAAC,CAAD,CAA1B;;AAGA,KACEA,MAAM,CAACxE,KAAP,CAAa,UAACwD,KAAD;AAAA,aAAWA,KAAK,CAAChE,WAAN,CAAkBM,QAAlB,CAA2BG,MAA3B,CAAkC+E,WAAW,CAACxF,WAAZ,CAAwBM,QAA1D,CAAX;AAAA,KAAb,CADF,2CAAA1F,SAAS,QAEP,eAFO,CAAT,GAAAA,SAAS,OAAT;AAIA,KACEoK,MAAM,CAACxE,KAAP,CAAa,UAACwD,KAAD;AAAA,aAAWA,KAAK,CAAC/D,YAAN,CAAmBK,QAAnB,CAA4BG,MAA5B,CAAmC+E,WAAW,CAACvF,YAAZ,CAAyBK,QAA5D,CAAX;AAAA,KAAb,CADF,2CAAA1F,SAAS,QAEP,gBAFO,CAAT,GAAAA,SAAS,OAAT;AAIA,KACEoK,MAAM,CAACxE,KAAP,CAAa,UAACwD,KAAD;AAAA,aAAWA,KAAK,CAACpE,SAAN,KAAoB4F,WAAW,CAAC5F,SAA3C;AAAA,KAAb,CADF,2CAAAhF,SAAS,QAEP,iBAFO,CAAT,GAAAA,SAAS,OAAT;AAKA,QAAMF,SAAS,GAAa,EAA5B;AAEA,QAAM+K,aAAa,GAAGD,WAAW,CAACxF,WAAZ,CAAwBM,QAAxB,CAAiCoF,QAAvD;AACA,QAAMC,cAAc,GAAGH,WAAW,CAACvF,YAAZ,CAAyBK,QAAzB,CAAkCoF,QAAzD;AAGA;AACA;AACA;;AACA,QAAMxB,8BAA8B,GAAGsB,WAAW,CAAC5F,SAAZ,KAA0B8B,SAAS,CAACS,WAApC,IAAmDoD,cAAc,GAAG,CAA3G;AAEA;AACA;AACA;AACA;;AACA,QAAMtB,iBAAiB,GAAG0B,cAAc,IAAI,CAAC,CAAChM,OAAO,CAACmC,GAA5B,IAAmC,CAAC,CAACmJ,YAArC,IAAqDf,8BAA/E;;AAGA,QAAIvK,OAAO,CAACiM,gBAAZ,EAA8B;AAC5B,OAAUJ,WAAW,CAACxF,WAAZ,CAAwBM,QAAxB,CAAiCuF,OAA3C,2CAAAjL,SAAS,QAA2C,kBAA3C,CAAT,GAAAA,SAAS,OAAT;AACAF,MAAAA,SAAS,CAACyF,IAAV,CAAe2F,UAAU,CAACC,YAAX,CAAwBP,WAAW,CAACxF,WAAZ,CAAwBM,QAAhD,EAA0D3G,OAAO,CAACiM,gBAAlE,CAAf;AACD;;AAED,0DAAoBZ,MAApB,2CAA4B;AAAA,UAAjBhB,KAAiB;;AAC1B,UAAIA,KAAK,YAAYoB,OAArB,EAA8B;AAC5B1K,QAAAA,SAAS,CAACyF,IAAV,CAAe2D,UAAU,CAACC,YAAX,CAAwBC,KAAxB,EAA+BrK,OAA/B,EAAwCsK,iBAAxC,EAA2DC,8BAA3D,CAAf;AACD,OAFD,MAEO;AACL,8DAAuBJ,UAAU,CAACO,YAAX,CACrBL,KADqB,EAErBrK,OAFqB,EAGrBsK,iBAHqB,EAIrBC,8BAJqB,CAAvB,2CAKG;AAAA,cALQ8B,QAKR;AACDtL,UAAAA,SAAS,CAACyF,IAAV,CAAe6F,QAAf;AACD;AACF;AACF;;AAED,QAAMC,OAAO,GAA6BlE,cAAc,CAACC,aAAf,CAA6BwD,WAAW,CAACxF,WAAZ,CAAwBM,QAArD,EAA+D,CAA/D,CAA1C;AACA,QAAM4F,QAAQ,GAA6BnE,cAAc,CAACC,aAAf,CAA6BwD,WAAW,CAACvF,YAAZ,CAAyBK,QAAtD,EAAgE,CAAhE,CAA3C;AAEA,QAAMkB,gBAAgB,GAA6BwD,MAAM,CAACpE,MAAP,CACjD,UAACuF,GAAD,EAAMnC,KAAN;AAAA,aAAgBmC,GAAG,CAACjF,GAAJ,CAAQ8C,KAAK,CAACxC,gBAAN,CAAuB7H,OAAO,CAACwB,iBAA/B,CAAR,CAAhB;AAAA,KADiD,EAEjD+K,QAFiD,CAAnD;AAKA,QAAME,cAAc,GAA6BpB,MAAM,CAACpE,MAAP,CAC/C,UAACuF,GAAD,EAAMnC,KAAN;AAAA,aAAgBmC,GAAG,CAACjF,GAAJ,CAAQ8C,KAAK,CAAC/D,YAAd,CAAhB;AAAA,KAD+C,EAE/CiG,QAF+C,CAAjD;AAKA,QAAMG,aAAa,GAA6BrB,MAAM,CAACpE,MAAP,CAC9C,UAACuF,GAAD,EAAMnC,KAAN;AAAA,aAAgBmC,GAAG,CAACjF,GAAJ,CAAQ8C,KAAK,CAAC/B,eAAN,CAAsBtI,OAAO,CAACwB,iBAA9B,CAAR,CAAhB;AAAA,KAD8C,EAE9C8K,OAF8C,CAAhD;AAKA,WAAO;AACLvL,MAAAA,SAAS,EAATA,SADK;AAEL8K,MAAAA,WAAW,EAAXA,WAFK;AAGLvB,MAAAA,iBAAiB,EAAjBA,iBAHK;AAILwB,MAAAA,aAAa,EAAbA,aAJK;AAKLE,MAAAA,cAAc,EAAdA,cALK;AAMLU,MAAAA,aAAa,EAAbA,aANK;AAOL7E,MAAAA,gBAAgB,EAAhBA,gBAPK;AAQL4E,MAAAA,cAAc,EAAdA;AARK,KAAP;AAUD;AAED;;;;;AA7PF;;AAAA,aAkQgBE,kBAlQhB,GAkQS,4BACLtB,MADK,EAMLrL,OANK;AAQL,gCAQImK,UAAU,CAACiB,WAAX,CAAuBC,MAAvB,EAA+BrL,OAA/B,CARJ;AAAA,QACEe,SADF,yBACEA,SADF;AAAA,QAEE8K,WAFF,yBAEEA,WAFF;AAAA,QAGEvB,iBAHF,yBAGEA,iBAHF;AAAA,QAIEwB,aAJF,yBAIEA,aAJF;AAAA,QAKEE,cALF,yBAKEA,cALF;AAAA,QAMEU,aANF,yBAMEA,aANF;AAAA,QAOE7E,gBAPF,yBAOEA,gBAPF;;;AAWA,QAAIyC,iBAAJ,EAAuB;AACrB,UAAI0B,cAAJ,EAAoB;AAClBjL,QAAAA,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACC,iBAAjB,CAAmC0D,gBAAgB,CAAC9F,QAApD,EAA8D/B,OAAO,CAACuC,SAAtE,EAAiFvC,OAAO,CAACmC,GAAzF,CAAf;AACD,OAFD,MAEO;AACLpB,QAAAA,SAAS,CAACyF,IAAV,CACEtC,gBAAgB,CAACQ,gBAAjB,CACEmH,WAAW,CAACvF,YAAZ,CAAyBK,QAAzB,CAAkC/D,OADpC,EAEEiF,gBAAgB,CAAC9F,QAFnB,EAGE/B,OAAO,CAACuC,SAHV,EAIEvC,OAAO,CAACmC,GAJV,CADF;AAQD;AACF;;;AAGD,QAAI2J,aAAa,IAAID,WAAW,CAAC5F,SAAZ,KAA0B8B,SAAS,CAACC,YAAzD,EAAuE;AACrEjH,MAAAA,SAAS,CAACyF,IAAV,CAAelC,QAAQ,CAACsI,eAAT,EAAf;AACD;;AAED,WAAO;AACLP,MAAAA,QAAQ,EAAE9I,iBAAiB,CAACC,eAAlB,CAAkCzC,SAAlC,EAA6Cf,OAAO,CAAC6M,2BAArD,CADL;AAELC,MAAAA,KAAK,EAAExK,KAAK,CAACwJ,aAAa,GAAGY,aAAa,CAAC3K,QAAjB,GAA4BrC,MAA1C;AAFP,KAAP;AAID;AAED;;;;;AA/SF;;AAAA,aAoTgBqN,wBApThB,GAoTS,kCACL1B,MADK,EAMLrL,OANK,EAOLqB,QAPK,EAQLE,mBARK,EASLyL,mBATK,EAULC,oBAVK;AAYL,iCAQI9C,UAAU,CAACiB,WAAX,CAAuBC,MAAvB,EAA+BrL,OAA/B,EAAwC,IAAxC,CARJ;AAAA,QACEe,SADF,0BACEA,SADF;AAAA,QAEE+K,aAFF,0BAEEA,aAFF;AAAA,QAGEE,cAHF,0BAGEA,cAHF;AAAA,QAIEH,WAJF,0BAIEA,WAJF;AAAA,QAKiBqB,kBALjB,0BAKER,aALF;AAAA,QAMED,cANF,0BAMEA,cANF;AAAA,QAOE5E,gBAPF,0BAOEA,gBAPF;;;AAWA,QAAI7H,OAAO,CAACmN,iBAAZ,EAA+B;AAC7B,OAAUV,cAAc,CAAC9F,QAAf,CAAwBuF,OAAlC,2CAAAjL,SAAS,QAAkC,yBAAlC,CAAT,GAAAA,SAAS,OAAT;AACAF,MAAAA,SAAS,CAACyF,IAAV,CAAe2F,UAAU,CAACC,YAAX,CAAwBK,cAAc,CAAC9F,QAAvC,EAAiD3G,OAAO,CAACmN,iBAAzD,CAAf;AACD;;AAED,QAAMC,OAAO,GAAGvB,WAAW,CAACtF,KAAZ,CAAkB6G,OAAlC;AACA,QAAMC,UAAU,GAAGhM,QAAQ,CAACY,IAAT,CAAcD,MAAd,CAAqBY,OAArB,CAA6BlC,OAA7B,KAAyCwM,kBAAkB,CAACvG,QAAnB,CAA4B/D,OAA5B,CAAoClC,OAAhG;;AACA,gCAAgDyJ,UAAU,CAACmD,kBAAX,CAA8BjM,QAA9B,EAAwCgM,UAAxC,CAAhD;AAAA,QAAQE,gBAAR,yBAAQA,gBAAR;AAAA,QAA0BC,iBAA1B,yBAA0BA,iBAA1B;;;AAGA,QAAM3C,OAAO,GAAGiB,aAAa,GAAG2B,KAAK,CAACL,OAAD,CAAR,GAAoBG,gBAAgB,CAAC5G,QAAjB,CAA0B/D,OAA3E;AACA,QAAMkI,QAAQ,GAAGkB,cAAc,GAAGyB,KAAK,CAACL,OAAD,CAAR,GAAoBI,iBAAiB,CAAC7G,QAAlB,CAA2B/D,OAA9E;;AAGA,QAAM8K,kBAAkB,GAAGF,iBAAiB,CAAC1D,QAAlB,CAA2B2C,cAAc,CAAC7J,OAA1C,CAA3B;;AACA,QAAI8K,kBAAkB,CAACC,WAAnB,CAA+BvF,cAAc,CAACC,aAAf,CAA6BmF,iBAAiB,CAAC7G,QAA/C,EAAyD,CAAzD,CAA/B,CAAJ,EAAiG;AAC/F;AACA;AACAqF,MAAAA,cAAc,GACVjL,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACW,aAAjB,CAA+B6I,kBAAkB,CAAC3L,QAAlD,CAAf,CADU,GAEVhB,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACS,UAAjB,CAA4BmG,QAA5B,EAAsC4C,kBAAkB,CAAC3L,QAAzD,CAAf,CAFJ;AAGD;;;AAGD+J,IAAAA,aAAa,GACT/K,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACW,aAAjB,CAA+B0I,gBAAgB,CAACxL,QAAhD,CAAf,CADS,GAEThB,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACS,UAAjB,CAA4BkG,OAA5B,EAAqC0C,gBAAgB,CAACxL,QAAtD,CAAf,CAFJ;;AAKA,QAAIiL,mBAAmB,KAAKlN,aAAa,CAAC8N,YAA1C,EACE7M,SAAS,CAACyF,IAAV,CAAenG,cAAc,CAACoC,aAAf,CAA6BoI,OAA7B,EAAsCmC,mBAAtC,CAAf;AACF,QAAIC,oBAAoB,KAAKnN,aAAa,CAAC8N,YAA3C,EACE7M,SAAS,CAACyF,IAAV,CAAenG,cAAc,CAACoC,aAAf,CAA6BqI,QAA7B,EAAuCmC,oBAAvC,CAAf;AAGF;;AACA,QAAM3L,eAAe,GAAGuM,QAAQ,CAACC,WAAT,CAAqB;AAC3C7L,MAAAA,IAAI,EAAEZ,QAAQ,CAACY,IAD4B;AAE3CG,MAAAA,SAAS,EAAEf,QAAQ,CAACe,SAFuB;AAG3CC,MAAAA,SAAS,EAAEhB,QAAQ,CAACgB,SAHuB;AAI3CV,MAAAA,OAAO,EAAE0L,UAAU,GAAGhM,QAAQ,CAACM,OAAT,CAAiBI,QAAjB,CAA0BgM,QAA1B,EAAH,GAA0ClG,gBAAgB,CAAC9F,QAAjB,CAA0BgM,QAA1B,EAJlB;AAK3ClM,MAAAA,OAAO,EAAEwL,UAAU,GAAGxF,gBAAgB,CAAC9F,QAAjB,CAA0BgM,QAA1B,EAAH,GAA0C1M,QAAQ,CAACQ,OAAT,CAAiBE,QAAjB,CAA0BgM,QAA1B,EALlB;AAM3CC,MAAAA,gBAAgB,EAAE;AANyB,KAArB,CAAxB;;AAUAjN,IAAAA,SAAS,CAACyF,IAAV,CACEnG,cAAc,CAACe,kBAAf,CAAkCC,QAAlC,EAA4CC,eAA5C,EAA6DC,mBAA7D,EAAkFvB,OAAO,CAACwB,iBAA1F,CADF;;AAKAsK,IAAAA,aAAa,GACT/K,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACC,iBAAjB,CAAmCzE,MAAnC,CAAf,CADS,GAETqB,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACQ,gBAAjB,CAAkCmG,OAAlC,EAA2CnL,MAA3C,CAAf,CAFJ;AAGAsM,IAAAA,cAAc,GACVjL,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACC,iBAAjB,CAAmCzE,MAAnC,CAAf,CADU,GAEVqB,SAAS,CAACyF,IAAV,CAAetC,gBAAgB,CAACQ,gBAAjB,CAAkCoG,QAAlC,EAA4CpL,MAA5C,CAAf,CAFJ;AAIA,QAAIoN,KAAJ;;AACA,QAAIhB,aAAJ,EAAmB;AACjBgB,MAAAA,KAAK,GAAGI,kBAAkB,CAACtK,OAAnB,CAA2B2E,GAA3B,CAA+BgG,gBAAgB,CAAC3K,OAAhD,EAAyDb,QAAjE;AACD,KAFD,MAEO,IAAIiK,cAAJ,EAAoB;AACzBc,MAAAA,KAAK,GAAGY,kBAAkB,CAAC3L,QAA3B;AACD,KAFM,MAEA;AACL+K,MAAAA,KAAK,GAAGpN,MAAR;AACD;;AAED,WAAO;AACL2M,MAAAA,QAAQ,EAAE9I,iBAAiB,CAACC,eAAlB,CAAkCzC,SAAlC,EAA6Cf,OAAO,CAAC6M,2BAArD,CADL;AAELC,MAAAA,KAAK,EAAEA,KAAK,CAACiB,QAAN;AAFF,KAAP;AAID,GAlZH;;AAAA,aAoZiBT,kBApZjB,GAoZU,4BACNjM,QADM,EAENgM,UAFM;AAIN,gCAA6BhM,QAAQ,CAAC4M,WAAtC;AAAA,QAAQtM,OAAR,yBAAQA,OAAR;AAAA,QAAiBE,OAAjB,yBAAiBA,OAAjB;AACA,QAAMqM,eAAe,GAAG9F,cAAc,CAACC,aAAf,CAA6BhH,QAAQ,CAACY,IAAT,CAAcD,MAA3C,EAAmDL,OAAnD,CAAxB;AACA,QAAMwM,eAAe,GAAG/F,cAAc,CAACC,aAAf,CAA6BhH,QAAQ,CAACY,IAAT,CAAcC,MAA3C,EAAmDL,OAAnD,CAAxB;;AAEA,eAA8CwL,UAAU,GACpD,CAACa,eAAD,EAAkBC,eAAlB,CADoD,GAEpD,CAACA,eAAD,EAAkBD,eAAlB,CAFJ;AAAA,QAAOX,gBAAP;AAAA,QAAyBC,iBAAzB;;AAGA,WAAO;AAAED,MAAAA,gBAAgB,EAAhBA,gBAAF;AAAoBC,MAAAA,iBAAiB,EAAjBA;AAApB,KAAP;AACD,GAhaH;;AAAA;AAAA;AACgBrD,oBAAA,gBAAuB,IAAInH,SAAJ,CAAcC,KAAd,CAAvB;;;;"}